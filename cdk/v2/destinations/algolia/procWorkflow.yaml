options:
  templateType: jsontemplate
bindings:
- name: EventType
  path: ../../../../constants

steps:
  - name: validateInput
    template: |
      $.assert(.message.type, "message Type is not present. Aborting message.");
      $.assert(.destination.Config.apiKey, "Invalid Api Key");
      $.assert(.destination.Config.applicationId, "Invalid Application Id");
      $.assert(.message.type === {{$.EventType.TRACK}}, 
        "message type " + .message.type + " not supported")
  - name: trackEventWorkflow
    externalWorkflow:
      path: ./trackEventWorkflow.yaml


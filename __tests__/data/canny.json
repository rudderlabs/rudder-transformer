[
  {
    "description": "Identify call for creating or updating user",
    "input": {
      "destination": {
        "Config": {
          "apiKey": "FXLkLUEhGJyvmY4"
        }
      },
      "message": {
        "type": "identify",
        "sentAt": "2022-01-20T13:39:21.033Z",
        "userId": "user123456001",
        "channel": "web",
        "context": {
          "os": {
            "name": "",
            "version": ""
          },
          "app": {
            "name": "RudderLabs JavaScript SDK",
            "build": "1.0.0",
            "version": "1.2.20",
            "namespace": "com.rudderlabs.javascript"
          },
          "page": {
            "url": "http://127.0.0.1:7307/Testing/App_for_LaunchDarkly/ourSdk.html",
            "path": "/Testing/App_for_LaunchDarkly/ourSdk.html",
            "title": "Document",
            "search": "",
            "tab_url": "http://127.0.0.1:7307/Testing/App_for_LaunchDarkly/ourSdk.html",
            "referrer": "http://127.0.0.1:7307/Testing/App_for_LaunchDarkly/",
            "initial_referrer": "$direct",
            "referring_domain": "127.0.0.1:7307",
            "initial_referring_domain": ""
          },
          "locale": "en-US",
          "screen": {
            "width": 1440,
            "height": 900,
            "density": 2,
            "innerWidth": 536,
            "innerHeight": 689
          },
          "traits": {
            "city": "Pune",
            "name": "First User",
            "email": "firstUser@testmail.com",
            "title": "VP",
            "gender": "female"
          },
          "library": {
            "name": "RudderLabs JavaScript SDK",
            "version": "1.2.20"
          },
          "campaign": {},
          "userAgent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4692.71 Safari/537.36"
        },
        "rudderId": "553b5522-c575-40a7-8072-9741c5f9a647",
        "messageId": "831f1fa5-de84-4f22-880a-4c3f23fc3f04",
        "anonymousId": "bf412108-0357-4330-b119-7305e767823c",
        "integrations": {
          "All": true
        },
        "originalTimestamp": "2022-01-20T13:39:21.032Z"
      }
    },
    "output": {
      "version": "1",
      "type": "REST",
      "method": "POST",
      "endpoint": "https://canny.io/api/v1/users/create_or_update",
      "headers": {
        "Authorization": "Basic FXLkLUEhGJyvmY4",
        "Content-Type": "application/json"
      },
      "params": {},
      "body": {
        "JSON": {
          "customFields": {
            "city": "Pune",
            "title": "VP",
            "gender": "female"
          },
          "apiKey": "FXLkLUEhGJyvmY4",
          "userID": "user123456001",
          "email": "firstUser@testmail.com",
          "name": "First User",
          "created": "2022-01-20T13:39:21.032Z"
        },
        "JSON_ARRAY": {},
        "XML": {},
        "FORM": {}
      },
      "files": {}
    }
  },
  {
    "description": "specifying multiple events for one event name and vice versa.",
    "input": {
      "destination": {
        "Config": {
          "apiKey": "apikey123",
          "eventsToEvents": [
            {
              "from": "abc",
              "to": "createVote"
            },
            {
              "from": "abc",
              "to": "createPost"
            },
            {
              "from": "def",
              "to": "createPost"
            }
          ]
        }
      },
      "message": {
        "postID": "postid",
        "event": "abc",
        "type": "track",
        "sentAt": "2022-01-20T13:39:21.033Z",
        "userId": "user123456001",
        "channel": "web",
        "properties": {
          "postID": "postid",
          "boardID": "boardid",
          "title": "title",
          "details": "details"
        },
        "context": {
          "os": {
            "name": "",
            "version": ""
          },
          "app": {
            "name": "RudderLabs JavaScript SDK",
            "build": "1.0.0",
            "version": "1.2.20",
            "namespace": "com.rudderlabs.javascript"
          },
          "page": {
            "url": "http://127.0.0.1:7307/Testing/App_for_LaunchDarkly/ourSdk.html",
            "path": "/Testing/App_for_LaunchDarkly/ourSdk.html",
            "title": "Document",
            "search": "",
            "tab_url": "http://127.0.0.1:7307/Testing/App_for_LaunchDarkly/ourSdk.html",
            "referrer": "http://127.0.0.1:7307/Testing/App_for_LaunchDarkly/",
            "initial_referrer": "$direct",
            "referring_domain": "127.0.0.1:7307",
            "initial_referring_domain": ""
          },
          "locale": "en-US",
          "screen": {
            "width": 1440,
            "height": 900,
            "density": 2,
            "innerWidth": 536,
            "innerHeight": 689
          },
          "traits": {
            "city": "Pune",
            "name": "First User",
            "email": "rohithkaza@rudderstack.com",
            "title": "VP",
            "gender": "male"
          },
          "library": {
            "name": "RudderLabs JavaScript SDK",
            "version": "1.2.20"
          },
          "campaign": {},
          "userAgent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4692.71 Safari/537.36"
        },
        "rudderId": "553b5522-c575-40a7-8072-9741c5f9a647",
        "messageId": "831f1fa5-de84-4f22-880a-4c3f23fc3f04",
        "anonymousId": "bf412108-0357-4330-b119-7305e767823c",
        "integrations": {
          "All": true
        },
        "originalTimestamp": "2022-01-20T13:39:21.032Z"
      }
    },
    "output": [
      {
        "version": "1",
        "type": "REST",
        "method": "POST",
        "endpoint": "https://canny.io/api/v1/votes/create",
        "headers": {
          "Authorization": "Basic apikey123",
          "Content-Type": "application/x-www-form-urlencoded"
        },
        "params": {},
        "body": {
          "JSON": {},
          "JSON_ARRAY": {},
          "XML": {},
          "FORM": {
            "postID": "postid",
            "apiKey": "apikey123",
            "voterID": "52d14c90fff7c80abcd12345"
          }
        },
        "files": {}
      },
      {
        "version": "1",
        "type": "REST",
        "method": "POST",
        "endpoint": "https://canny.io/api/v1/posts/create",
        "headers": {
          "Authorization": "Basic apikey123",
          "Content-Type": "application/json"
        },
        "params": {},
        "body": {
          "JSON": {
            "apiKey": "apikey123",
            "boardID": "boardid",
            "details": "details",
            "title": "title",
            "authorID": "52d14c90fff7c80abcd12345"
          },
          "JSON_ARRAY": {},
          "XML": {},
          "FORM": {}
        },
        "files": {}
      }
    ]
  },
  {
    "description": "mapping event to createVote",
    "input": {
      "destination": {
        "Config": {
          "apiKey": "apikey123",
          "eventsToEvents": [
            {
              "from": "abc",
              "to": "createPost"
            }
          ]
        }
      },
      "message": {
        "boardID": "postid",
        "event": "abc",
        "type": "track",
        "sentAt": "2022-01-20T13:39:21.033Z",
        "userId": "user123456001",
        "channel": "web",
        "properties": {
          "boardID": "boardid",
          "title": "title",
          "details": "details"
        },
        "context": {
          "os": {
            "name": "",
            "version": ""
          },
          "app": {
            "name": "RudderLabs JavaScript SDK",
            "build": "1.0.0",
            "version": "1.2.20",
            "namespace": "com.rudderlabs.javascript"
          },
          "page": {
            "url": "http://127.0.0.1:7307/Testing/App_for_LaunchDarkly/ourSdk.html",
            "path": "/Testing/App_for_LaunchDarkly/ourSdk.html",
            "title": "Document",
            "search": "",
            "tab_url": "http://127.0.0.1:7307/Testing/App_for_LaunchDarkly/ourSdk.html",
            "referrer": "http://127.0.0.1:7307/Testing/App_for_LaunchDarkly/",
            "initial_referrer": "$direct",
            "referring_domain": "127.0.0.1:7307",
            "initial_referring_domain": ""
          },
          "locale": "en-US",
          "screen": {
            "width": 1440,
            "height": 900,
            "density": 2,
            "innerWidth": 536,
            "innerHeight": 689
          },
          "traits": {
            "city": "Pune",
            "name": "First User",
            "email": "rohithkaza@rudderstack.com",
            "title": "VP",
            "gender": "male"
          },
          "library": {
            "name": "RudderLabs JavaScript SDK",
            "version": "1.2.20"
          },
          "campaign": {},
          "userAgent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4692.71 Safari/537.36"
        },
        "rudderId": "553b5522-c575-40a7-8072-9741c5f9a647",
        "messageId": "831f1fa5-de84-4f22-880a-4c3f23fc3f04",
        "anonymousId": "bf412108-0357-4330-b119-7305e767823c",
        "integrations": {
          "All": true
        },
        "originalTimestamp": "2022-01-20T13:39:21.032Z"
      }
    },
    "output": [
      {
        "version": "1",
        "type": "REST",
        "method": "POST",
        "endpoint": "https://canny.io/api/v1/posts/create",
        "headers": {
          "Authorization": "Basic apikey123",
          "Content-Type": "application/json"
        },
        "params": {},
        "body": {
          "FORM": {},
          "JSON_ARRAY": {},
          "XML": {},
          "JSON": {
            "apiKey": "apikey123",
            "authorID": "52d14c90fff7c80abcd12345",
            "boardID": "boardid",
            "details": "details",
            "title": "title"
          }
        },
        "files": {}
      }
    ]
  },
  {
    "description": "mapping single event to same event multiple times",
    "input": {
      "destination": {
        "Config": {
          "apiKey": "apikey123",
          "eventsToEvents": [
            {
              "from": "sample",
              "to": "createPost"
            },
            {
              "from": "sample",
              "to": "createPost"
            },
            {
              "from": "sample",
              "to": "createPost"
            }
          ]
        }
      },
      "message": {
        "anonymousId": "d6a9d06e8a464324d448003ff0467d971a55ca2950e11fc51faaec4e2850ecc6",
        "event": "sample",
        "integrations": { "Canny": false },
        "context": {
          "library": {
            "name": "unknown",
            "version": "unknown"
          },
          "integration": {
            "name": "Canny",
            "version": "1.0.0"
          },
          "traits": {
            "created": "2022-07-15T11:16:32.648Z",
            "email": "rohithkaza@abc.com",
            "isAdmin": true,
            "name": "Rohith Kumar Kaza",
            "url": "https://rudder.canny.io/admin/users/rohith-kumar-kaza-1"
          },
          "externalId": [
            {
              "type": "cannyUserId",
              "value": "62d1"
            }
          ]
        },
        "timestamp": "2022-07-28T10:52:46.294Z",
        "originalTimestamp": "2022-07-28T10:52:46.294Z",
        "type": "track",
        "properties": {
          "board": {
            "created": "2022-07-25T12:11:19.895Z",
            "id": "62de8",
            "name": "features",
            "postCount": 13,
            "url": "https://rudder.canny.io/admin/board/features"
          },
          "by": null,
          "category": null,
          "commentCount": 0,
          "created": "2022-07-28T10:52:46.172Z",
          "customFields": [{ "id": "62e138", "name": "abc", "value": "123" }],
          "details": "Array of images",
          "eta": null,
          "id": "62e26a",
          "imageURLs": [
            "https://canny.io/images/6371453a825c79351c52a6063c3af476.jpg",
            "https://canny.io/images/47db6ee5035bfb45ea87a74f2eb17928.jpg"
          ],
          "objectType": "post",
          "owner": null,
          "score": 1,
          "status": "open",
          "tags": [],
          "title": "Custom Fields Testing",
          "url": "https://rudder.canny.io/admin/board/features/p/custom-fields-testing"
        }
      }
    },
    "output": [
      {
        "version": "1",
        "type": "REST",
        "method": "POST",
        "endpoint": "https://canny.io/api/v1/posts/create",
        "headers": {
          "Authorization": "Basic apikey123",
          "Content-Type": "application/json"
        },
        "params": {},
        "body": {
          "FORM": {},
          "JSON_ARRAY": {},
          "XML": {},
          "JSON": {
            "apiKey": "apikey123",
            "authorID": "52d14c90fff7c80abcd12345",
            "boardID": "62de8",
            "details": "Array of images",
            "title": "Custom Fields Testing",
            "imageURLs": [
              "https://canny.io/images/6371453a825c79351c52a6063c3af476.jpg",
              "https://canny.io/images/47db6ee5035bfb45ea87a74f2eb17928.jpg"
            ],
            "customFields": [{ "id": "62e138", "name": "abc", "value": "123" }]
          }
        },
        "files": {}
      }
    ]
  },
  {
    "description": "Event is not found in mapping",
    "input": {
      "destination": {
        "Config": {
          "apiKey": "apikey123",
          "eventsToEvents": [
            {
              "from": "sample",
              "to": "createPost"
            },
            {
              "from": "sample2",
              "to": "createPost"
            }
          ]
        }
      },
      "message": {
        "anonymousId": "d6a9d06e8a464324d448003ff0467d971a55ca2950e11fc51faaec4e2850ecc6",
        "event": "sample3",
        "integrations": { "Canny": false },
        "context": {
          "library": {
            "name": "unknown",
            "version": "unknown"
          },
          "integration": {
            "name": "Canny",
            "version": "1.0.0"
          },
          "traits": {
            "created": "2022-07-15T11:16:32.648Z",
            "email": "rohithkaza@abc.com",
            "isAdmin": true,
            "name": "Rohith Kumar Kaza",
            "url": "https://rudder.canny.io/admin/users/rohith-kumar-kaza-1"
          },
          "externalId": [
            {
              "type": "cannyUserId",
              "value": "62d1"
            }
          ]
        },
        "timestamp": "2022-07-28T10:52:46.294Z",
        "originalTimestamp": "2022-07-28T10:52:46.294Z",
        "type": "track",
        "properties": {
          "board": {
            "created": "2022-07-25T12:11:19.895Z",
            "id": "62de8",
            "name": "features",
            "postCount": 13,
            "url": "https://rudder.canny.io/admin/board/features"
          },
          "by": null,
          "category": null,
          "commentCount": 0,
          "created": "2022-07-28T10:52:46.172Z",
          "customFields": [{ "id": "62e138", "name": "abc", "value": "123" }],
          "details": "Array of images",
          "eta": null,
          "id": "62e26a",
          "imageURLs": [
            "https://canny.io/images/6371453a825c79351c52a6063c3af476.jpg",
            "https://canny.io/images/47db6ee5035bfb45ea87a74f2eb17928.jpg"
          ],
          "objectType": "post",
          "owner": null,
          "score": 1,
          "status": "open",
          "tags": [],
          "title": "Custom Fields Testing",
          "url": "https://rudder.canny.io/admin/board/features/p/custom-fields-testing"
        }
      }
    },
    "output": {
      "statusCode": 400,
      "error": "Event name (sample3) is not present in the mapping"
    }
  }
]

[
  {
    "description": "click - testing all the parameters mapping for click conversions",
    "input": {
      "message": {
        "channel": "web",
        "context": {
          "app": {
            "build": "1.0.0",
            "name": "RudderLabs JavaScript SDK",
            "namespace": "com.rudderlabs.javascript",
            "version": "1.0.0"
          },
          "device": {
            "id": "0572f78fa49c648e",
            "name": "generic_x86_arm",
            "type": "Android",
            "model": "AOSP on IA Emulator",
            "manufacturer": "Google",
            "adTrackingEnabled": true,
            "advertisingId": "44c97318-9040-4361-8bc7-4eb30f665ca8"
          },
          "traits": {
            "email": "alex@example.com",
            "phone": "+1-202-555-0146",
            "firstName": "John",
            "lastName": "Gomes",
            "city": "London",
            "state": "England",
            "countryCode": "GB",
            "postalCode": "EC3M",
            "streetAddress": "71 Cherry Court SOUTHAMPTON SO53 5PD UK"
          },
          "library": {
            "name": "RudderLabs JavaScript SDK",
            "version": "1.0.0"
          },
          "userAgent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/77.0.3865.90 Safari/537.36",
          "locale": "en-US",
          "ip": "0.0.0.0",
          "os": {
            "name": "",
            "version": ""
          },
          "screen": {
            "density": 2
          }
        },
        "event": "Promotion Clicked",
        "type": "track",
        "messageId": "5e10d13a-bf9a-44bf-b884-43a9e591ea71",
        "originalTimestamp": "2019-10-14T11:15:18.299Z",
        "anonymousId": "00000000000000000000000000",
        "userId": "12345",
        "properties": {
          "gbraid": "gbraid",
          "wbraid": "wbraid",
          "externalAttributionCredit": 10,
          "externalAttributionModel": "externalAttributionModel",
          "conversionCustomVariable": "conversionCustomVariable",
          "value": "value",
          "merchantId": "9876merchantId",
          "feedCountryCode": "feedCountryCode",
          "feedLanguageCode": "feedLanguageCode",
          "localTransactionCost": 20,
          "products": [
            {
              "product_id": "507f1f77bcf86cd799439011",
              "quantity": "2",
              "price": "50",
              "sku": "45790-32",
              "name": "Monopoly: 3rd Edition",
              "position": "1",
              "category": "cars",
              "url": "https://www.example.com/product/path",
              "image_url": "https://www.example.com/product/path.jpg"
            }
          ],
          "userIdentifierSource": "FIRST_PARTY",
          "conversionEnvironment": "WEB",
          "gclid": "gclid",
          "conversionDateTime": "2022-01-01 12:32:45-08:00",
          "conversionValue": "1",
          "currency": "GBP",
          "orderId": "PL-123QR"
        },
        "integrations": {
          "All": true
        },
        "name": "ApplicationLoaded",
        "sentAt": "2019-10-14T11:15:53.296Z"
      },
      "metadata": {
        "secret": {
          "access_token": "abcd1234",
          "refresh_token": "efgh5678",
          "developer_token": "ijkl91011"
        }
      },
      "destination": {
        "Config": {
          "customerId": "962-581-2972",
          "subAccount": false,
          "eventsToOfflineConversionsTypeMapping": [
            {
              "from": "Sign up completed",
              "to": "click"
            },
            {
              "from": "Download",
              "to": "call"
            },
            {
              "from": "Promotion Clicked",
              "to": "click"
            },
            {
              "from": "Product Searched",
              "to": "call"
            }
          ],
          "eventsToConversionsNamesMapping": [
            {
              "from": "Sign up completed",
              "to": "Sign-up - click"
            },
            {
              "from": "Download",
              "to": "Page view"
            },
            {
              "from": "Promotion Clicked",
              "to": "Sign-up - click"
            },
            {
              "from": "Product Searched",
              "to": "search"
            }
          ],
          "customVariables": [
            {
              "from": "value",
              "to": "revenue"
            },
            {
              "from": "total",
              "to": "cost"
            }
          ],
          "UserIdentifierSource": "THIRD_PARTY",
          "conversionEnvironment": "WEB",
          "hashUserIdentifier": true,
          "defaultUserIdentifier": "email",
          "validateOnly": false,
          "rudderAccountId": "2EOknn1JNH7WK1MfNku4fGYKkRK"
        }
      }
    },
    "output": [
      {
        "version": "1",
        "type": "REST",
        "method": "POST",
        "endpoint": "https://googleads.googleapis.com/v13/customers/9625812972:uploadClickConversions",
        "headers": {
          "Authorization": "Bearer abcd1234",
          "Content-Type": "application/json",
          "developer-token": "ijkl91011"
        },
        "params": {
          "event": "Sign-up - click",
          "customerId": "9625812972",
          "customVariables": [
            {
              "from": "value",
              "to": "revenue"
            },
            {
              "from": "total",
              "to": "cost"
            }
          ],
          "properties": {
            "gbraid": "gbraid",
            "wbraid": "wbraid",
            "externalAttributionCredit": 10,
            "externalAttributionModel": "externalAttributionModel",
            "conversionCustomVariable": "conversionCustomVariable",
            "value": "value",
            "merchantId": "9876merchantId",
            "feedCountryCode": "feedCountryCode",
            "feedLanguageCode": "feedLanguageCode",
            "localTransactionCost": 20,
            "products": [
              {
                "product_id": "507f1f77bcf86cd799439011",
                "quantity": "2",
                "price": "50",
                "sku": "45790-32",
                "name": "Monopoly: 3rd Edition",
                "position": "1",
                "category": "cars",
                "url": "https://www.example.com/product/path",
                "image_url": "https://www.example.com/product/path.jpg"
              }
            ],
            "userIdentifierSource": "FIRST_PARTY",
            "conversionEnvironment": "WEB",
            "gclid": "gclid",
            "conversionDateTime": "2022-01-01 12:32:45-08:00",
            "conversionValue": "1",
            "currency": "GBP",
            "orderId": "PL-123QR"
          }
        },
        "body": {
          "JSON": {
            "conversions": [
              {
                "gbraid": "gbraid",
                "wbraid": "wbraid",
                "externalAttributionData": {
                  "externalAttributionCredit": 10,
                  "externalAttributionModel": "externalAttributionModel"
                },
                "cartData": {
                  "merchantId": 9876,
                  "feedCountryCode": "feedCountryCode",
                  "feedLanguageCode": "feedLanguageCode",
                  "localTransactionCost": 20,
                  "items": [
                    {
                      "productId": "507f1f77bcf86cd799439011",
                      "quantity": 2,
                      "unitPrice": 50
                    }
                  ]
                },
                "userIdentifiers": [
                  {
                    "userIdentifierSource": "FIRST_PARTY",
                    "hashedEmail": "6db61e6dcbcf2390e4a46af426f26a133a3bee45021422fc7ae86e9136f14110"
                  }
                ],
                "conversionEnvironment": "WEB",
                "gclid": "gclid",
                "conversionDateTime": "2022-01-01 12:32:45-08:00",
                "conversionValue": 1,
                "currencyCode": "GBP",
                "orderId": "PL-123QR"
              }
            ],
            "partialFailure": true
          },
          "JSON_ARRAY": {},
          "XML": {},
          "FORM": {}
        },
        "files": {}
      }
    ]
  },
  {
    "description": "click - testing all the parameters mapping for click conversions with few edge cases - originalTimestamp and enums are none in config",
    "input": {
      "message": {
        "channel": "web",
        "context": {
          "app": {
            "build": "1.0.0",
            "name": "RudderLabs JavaScript SDK",
            "namespace": "com.rudderlabs.javascript",
            "version": "1.0.0"
          },
          "device": {
            "id": "0572f78fa49c648e",
            "name": "generic_x86_arm",
            "type": "Android",
            "model": "AOSP on IA Emulator",
            "manufacturer": "Google",
            "adTrackingEnabled": true,
            "advertisingId": "44c97318-9040-4361-8bc7-4eb30f665ca8"
          },
          "traits": {
            "email": "alex@example.com",
            "phone": "+1-202-555-0146",
            "firstName": "John",
            "lastName": "Gomes",
            "city": "London",
            "state": "England",
            "countryCode": "GB",
            "postalCode": "EC3M",
            "streetAddress": "71 Cherry Court SOUTHAMPTON SO53 5PD UK"
          },
          "library": {
            "name": "RudderLabs JavaScript SDK",
            "version": "1.0.0"
          },
          "userAgent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/77.0.3865.90 Safari/537.36",
          "locale": "en-US",
          "ip": "0.0.0.0",
          "os": {
            "name": "",
            "version": ""
          },
          "screen": {
            "density": 2
          }
        },
        "event": "sign up completed",
        "messageId": "5e10d13a-bf9a-44bf-b884-43a9e591ea71",
        "type": "track",
        "originalTimestamp": "2019-10-14T11:15:18.299Z",
        "anonymousId": "00000000000000000000000000",
        "userId": "12345",
        "properties": {
          "gbraid": "gbraid",
          "wbraid": "wbraid",
          "externalAttributionCredit": 10,
          "externalAttributionModel": "externalAttributionModel",
          "conversionCustomVariable": "conversionCustomVariable",
          "value": "10",
          "orderId": "PL-123QR",
          "merchantId": "123123Mpowi",
          "feedCountryCode": "feedCountryCode",
          "feedLanguageCode": "feedLanguageCode",
          "localTransactionCost": 20,
          "products": [
            {
              "product_id": "507f1f77bcf86cd799439011",
              "quantity": "2",
              "price": "50",
              "sku": "45790-32",
              "name": "Monopoly: 3rd Edition",
              "position": "1",
              "category": "cars",
              "url": "https://www.example.com/product/path",
              "image_url": "https://www.example.com/product/path.jpg"
            }
          ],
          "gclid": "gclid",
          "conversionAction": "customer",
          "conversionValue": "1",
          "currency": "GBP",
          "total": 555
        },
        "integrations": {
          "All": true
        },
        "name": "ApplicationLoaded",
        "sentAt": "2019-10-14T11:15:53.296Z"
      },
      "metadata": {
        "secret": {
          "access_token": "abcd1234",
          "refresh_token": "efgh5678",
          "developer_token": "ijkl91011"
        }
      },
      "destination": {
        "Config": {
          "customerId": "962-581-2972",
          "subAccount": false,
          "eventsToOfflineConversionsTypeMapping": [
            {
              "from": "Sign up completed",
              "to": "click"
            },
            {
              "from": "Download",
              "to": "call"
            },
            {
              "from": "Promotion Clicked",
              "to": "click"
            },
            {
              "from": "Product Searched",
              "to": "call"
            }
          ],
          "eventsToConversionsNamesMapping": [
            {
              "from": "Sign up completed",
              "to": "Sign-up - click"
            },
            {
              "from": "Download",
              "to": "Page view"
            },
            {
              "from": "Promotion Clicked",
              "to": "Sign-up - click"
            },
            {
              "from": "Product Searched",
              "to": "search"
            }
          ],
          "customVariables": [
            {
              "from": "value",
              "to": "revenue"
            },
            {
              "from": "total",
              "to": "cost"
            }
          ],
          "UserIdentifierSource": "THIRD_PARTY",
          "conversionEnvironment": "WEB",
          "hashUserIdentifier": true,
          "defaultUserIdentifier": "email",
          "validateOnly": false,
          "rudderAccountId": "2EOknn1JNH7WK1MfNku4fGYKkRK"
        }
      }
    },
    "output": [
      {
        "version": "1",
        "type": "REST",
        "method": "POST",
        "endpoint": "https://googleads.googleapis.com/v13/customers/9625812972:uploadClickConversions",
        "headers": {
          "Authorization": "Bearer abcd1234",
          "Content-Type": "application/json",
          "developer-token": "ijkl91011"
        },
        "params": {
          "event": "Sign-up - click",
          "customerId": "9625812972",
          "customVariables": [
            {
              "from": "value",
              "to": "revenue"
            },
            {
              "from": "total",
              "to": "cost"
            }
          ],
          "properties": {
            "gbraid": "gbraid",
            "wbraid": "wbraid",
            "externalAttributionCredit": 10,
            "externalAttributionModel": "externalAttributionModel",
            "conversionCustomVariable": "conversionCustomVariable",
            "value": "10",
            "orderId": "PL-123QR",
            "merchantId": "123123Mpowi",
            "feedCountryCode": "feedCountryCode",
            "feedLanguageCode": "feedLanguageCode",
            "localTransactionCost": 20,
            "products": [
              {
                "product_id": "507f1f77bcf86cd799439011",
                "quantity": "2",
                "price": "50",
                "sku": "45790-32",
                "name": "Monopoly: 3rd Edition",
                "position": "1",
                "category": "cars",
                "url": "https://www.example.com/product/path",
                "image_url": "https://www.example.com/product/path.jpg"
              }
            ],
            "gclid": "gclid",
            "conversionAction": "customer",
            "conversionValue": "1",
            "currency": "GBP",
            "total": 555
          }
        },
        "body": {
          "JSON": {
            "conversions": [
              {
                "gbraid": "gbraid",
                "wbraid": "wbraid",
                "externalAttributionData": {
                  "externalAttributionCredit": 10,
                  "externalAttributionModel": "externalAttributionModel"
                },
                "cartData": {
                  "merchantId": 123123,
                  "feedCountryCode": "feedCountryCode",
                  "feedLanguageCode": "feedLanguageCode",
                  "localTransactionCost": 20,
                  "items": [
                    {
                      "productId": "507f1f77bcf86cd799439011",
                      "quantity": 2,
                      "unitPrice": 50
                    }
                  ]
                },
                "userIdentifiers": [
                  {
                    "hashedEmail": "6db61e6dcbcf2390e4a46af426f26a133a3bee45021422fc7ae86e9136f14110",
                    "userIdentifierSource": "THIRD_PARTY"
                  }
                ],
                "gclid": "gclid",
                "conversionDateTime": "2019-10-14 11:15:18+00:00",
                "conversionEnvironment": "WEB",
                "conversionValue": 1,
                "currencyCode": "GBP",
                "orderId": "PL-123QR"
              }
            ],
            "partialFailure": true
          },
          "JSON_ARRAY": {},
          "XML": {},
          "FORM": {}
        },
        "files": {}
      }
    ]
  },
  {
    "description": "call - testing all the parameter mapping for call conversions",
    "input": {
      "message": {
        "channel": "web",
        "context": {
          "app": {
            "build": "1.0.0",
            "name": "RudderLabs JavaScript SDK",
            "namespace": "com.rudderlabs.javascript",
            "version": "1.0.0"
          },
          "device": {
            "id": "0572f78fa49c648e",
            "name": "generic_x86_arm",
            "type": "Android",
            "model": "AOSP on IA Emulator",
            "manufacturer": "Google",
            "adTrackingEnabled": true,
            "advertisingId": "44c97318-9040-4361-8bc7-4eb30f665ca8"
          },
          "traits": {
            "email": "alex@example.com",
            "phone": "+1-202-555-0146",
            "firstName": "John",
            "lastName": "Gomes",
            "city": "London",
            "state": "England",
            "countryCode": "GB",
            "postalCode": "EC3M",
            "streetAddress": "71 Cherry Court SOUTHAMPTON SO53 5PD UK"
          },
          "library": {
            "name": "RudderLabs JavaScript SDK",
            "version": "1.0.0"
          },
          "userAgent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/77.0.3865.90 Safari/537.36",
          "locale": "en-US",
          "ip": "0.0.0.0",
          "os": {
            "name": "",
            "version": ""
          },
          "screen": {
            "density": 2
          }
        },
        "event": "Product Searched",
        "type": "track",
        "messageId": "5e10d13a-bf9a-44bf-b884-43a9e591ea71",
        "originalTimestamp": "2019-10-14T11:15:18.299Z",
        "anonymousId": "00000000000000000000000000",
        "userId": "12345",
        "properties": {
          "externalAttributionCredit": 10,
          "externalAttributionModel": "externalAttributionModel",
          "merchantId": "merchantId",
          "feedCountryCode": "feedCountryCode",
          "feedLanguageCode": "feedLanguageCode",
          "localTransactionCost": 20,
          "products": [
            {
              "product_id": "507f1f77bcf86cd799439011",
              "quantity": "2",
              "price": "50",
              "sku": "45790-32",
              "name": "Monopoly: 3rd Edition",
              "position": "1",
              "category": "cars",
              "url": "https://www.example.com/product/path",
              "image_url": "https://www.example.com/product/path.jpg"
            }
          ],
          "userIdentifierSource": "FIRST_PARTY",
          "conversionEnvironment": "WEB",
          "gclid": "gclid",

          "conversionCustomVariable": "conversionCustomVariable",
          "value": "value",

          "callerId": "callerId",
          "callStartDateTime": "2022-08-28 15:01:30+05:30",
          "conversionDateTime": "2022-01-01 12:32:45-08:00",
          "conversionValue": "1",
          "currency": "GBP"
        },
        "integrations": {
          "All": true
        },
        "name": "ApplicationLoaded",
        "sentAt": "2019-10-14T11:15:53.296Z"
      },
      "metadata": {
        "secret": {
          "access_token": "abcd1234",
          "refresh_token": "efgh5678",
          "developer_token": "ijkl91011"
        }
      },
      "destination": {
        "Config": {
          "customerId": "962-581-2972",
          "subAccount": false,
          "eventsToOfflineConversionsTypeMapping": [
            {
              "from": "Sign up completed",
              "to": "click"
            },
            {
              "from": "Download",
              "to": "call"
            },
            {
              "from": "Promotion Clicked",
              "to": "click"
            },
            {
              "from": "Product Searched",
              "to": "call"
            }
          ],
          "eventsToConversionsNamesMapping": [
            {
              "from": "Sign up completed",
              "to": "Sign-up - click"
            },
            {
              "from": "Download",
              "to": "Page view"
            },
            {
              "from": "Promotion Clicked",
              "to": "Sign-up - click"
            },
            {
              "from": "Product Searched",
              "to": "search"
            }
          ],
          "customVariables": [
            {
              "from": "value",
              "to": "revenue"
            },
            {
              "from": "total",
              "to": "cost"
            }
          ],
          "UserIdentifierSource": "THIRD_PARTY",
          "conversionEnvironment": "WEB",
          "hashUserIdentifier": true,
          "defaultUserIdentifier": "email",
          "validateOnly": false,
          "rudderAccountId": "2EOknn1JNH7WK1MfNku4fGYKkRK"
        }
      }
    },
    "output": [
      {
        "version": "1",
        "type": "REST",
        "method": "POST",
        "endpoint": "https://googleads.googleapis.com/v13/customers/9625812972:uploadCallConversions",
        "headers": {
          "Authorization": "Bearer abcd1234",
          "Content-Type": "application/json",
          "developer-token": "ijkl91011"
        },
        "params": {
          "event": "search",
          "customerId": "9625812972",
          "customVariables": [
            {
              "from": "value",
              "to": "revenue"
            },
            {
              "from": "total",
              "to": "cost"
            }
          ],
          "properties": {
            "externalAttributionCredit": 10,
            "externalAttributionModel": "externalAttributionModel",
            "merchantId": "merchantId",
            "feedCountryCode": "feedCountryCode",
            "feedLanguageCode": "feedLanguageCode",
            "localTransactionCost": 20,
            "products": [
              {
                "product_id": "507f1f77bcf86cd799439011",
                "quantity": "2",
                "price": "50",
                "sku": "45790-32",
                "name": "Monopoly: 3rd Edition",
                "position": "1",
                "category": "cars",
                "url": "https://www.example.com/product/path",
                "image_url": "https://www.example.com/product/path.jpg"
              }
            ],
            "userIdentifierSource": "FIRST_PARTY",
            "conversionEnvironment": "WEB",
            "gclid": "gclid",
            "conversionCustomVariable": "conversionCustomVariable",
            "value": "value",
            "callerId": "callerId",
            "callStartDateTime": "2022-08-28 15:01:30+05:30",
            "conversionDateTime": "2022-01-01 12:32:45-08:00",
            "conversionValue": "1",
            "currency": "GBP"
          }
        },
        "body": {
          "JSON": {
            "conversions": [
              {
                "callerId": "callerId",
                "callStartDateTime": "2022-08-28 15:01:30+05:30",
                "conversionDateTime": "2022-01-01 12:32:45-08:00",
                "conversionValue": 1,
                "currencyCode": "GBP"
              }
            ],
            "partialFailure": true
          },
          "JSON_ARRAY": {},
          "XML": {},
          "FORM": {}
        },
        "files": {}
      }
    ]
  },
  {
    "description": "OAuth - access token not found",
    "input": {
      "message": {
        "channel": "web",
        "context": {
          "app": {
            "build": "1.0.0",
            "name": "RudderLabs JavaScript SDK",
            "namespace": "com.rudderlabs.javascript",
            "version": "1.0.0"
          },
          "device": {
            "id": "0572f78fa49c648e",
            "name": "generic_x86_arm",
            "type": "Android",
            "model": "AOSP on IA Emulator",
            "manufacturer": "Google",
            "adTrackingEnabled": true,
            "advertisingId": "44c97318-9040-4361-8bc7-4eb30f665ca8"
          },
          "traits": {
            "email": "alex@example.com",
            "phone": "+1-202-555-0146",
            "firstName": "John",
            "lastName": "Gomes",
            "city": "London",
            "state": "England",
            "countryCode": "GB",
            "postalCode": "EC3M",
            "streetAddress": "71 Cherry Court SOUTHAMPTON SO53 5PD UK"
          },
          "library": {
            "name": "RudderLabs JavaScript SDK",
            "version": "1.0.0"
          },
          "userAgent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/77.0.3865.90 Safari/537.36",
          "locale": "en-US",
          "ip": "0.0.0.0",
          "os": {
            "name": "",
            "version": ""
          },
          "screen": {
            "density": 2
          }
        },
        "event": "Promotion Clicked",
        "type": "track",
        "messageId": "5e10d13a-bf9a-44bf-b884-43a9e591ea71",
        "originalTimestamp": "2019-10-14T11:15:18.299Z",
        "anonymousId": "00000000000000000000000000",
        "userId": "12345",
        "properties": {
          "gbraid": "gbraid",
          "wbraid": "wbraid",
          "externalAttributionCredit": 10,
          "externalAttributionModel": "externalAttributionModel",
          "conversionCustomVariable": "conversionCustomVariable",
          "value": "value",
          "merchantId": "merchantId",
          "feedCountryCode": "feedCountryCode",
          "feedLanguageCode": "feedLanguageCode",
          "localTransactionCost": 20,
          "products": [
            {
              "product_id": "507f1f77bcf86cd799439011",
              "quantity": "2",
              "price": "50",
              "sku": "45790-32",
              "name": "Monopoly: 3rd Edition",
              "position": "1",
              "category": "cars",
              "url": "https://www.example.com/product/path",
              "image_url": "https://www.example.com/product/path.jpg"
            }
          ],
          "userIdentifierSource": "FIRST_PARTY",
          "conversionEnvironment": "WEB",
          "gclid": "gclid",
          "conversionDateTime": "2022-01-01 12:32:45-08:00",
          "conversionValue": "1",
          "currency": "GBP"
        },
        "integrations": {
          "All": true
        },
        "name": "ApplicationLoaded",
        "sentAt": "2019-10-14T11:15:53.296Z"
      },
      "metadata": {
        "secret": null
      },
      "destination": {
        "Config": {
          "customerId": "962-581-2972",
          "subAccount": false,
          "eventsToOfflineConversionsTypeMapping": [
            {
              "from": "Sign up completed",
              "to": "click"
            },
            {
              "from": "Download",
              "to": "call"
            },
            {
              "from": "Promotion Clicked",
              "to": "click"
            },
            {
              "from": "Product Searched",
              "to": "call"
            }
          ],
          "eventsToConversionsNamesMapping": [
            {
              "from": "Sign up completed",
              "to": "Sign-up - click"
            },
            {
              "from": "Download",
              "to": "Page view"
            },
            {
              "from": "Promotion Clicked",
              "to": "Sign-up - click"
            },
            {
              "from": "Product Searched",
              "to": "search"
            }
          ],
          "customVariables": [
            {
              "from": "value",
              "to": "revenue"
            },
            {
              "from": "total",
              "to": "cost"
            }
          ],
          "UserIdentifierSource": "THIRD_PARTY",
          "conversionEnvironment": "WEB",
          "hashUserIdentifier": true,
          "defaultUserIdentifier": "email",
          "validateOnly": false,
          "rudderAccountId": "2EOknn1JNH7WK1MfNku4fGYKkRK"
        }
      }
    },
    "output": {
      "metadata": {
        "secret": null
      },
      "statusCode": 500,
      "error": "OAuth - access token not found",
      "statTags": {
        "destination": "google_adwords_offline_conversions",
        "stage": "transform",
        "scope": "exception"
      }
    }
  },
  {
    "description": "message type not present",
    "input": {
      "message": {
        "channel": "web",
        "context": {
          "app": {
            "build": "1.0.0",
            "name": "RudderLabs JavaScript SDK",
            "namespace": "com.rudderlabs.javascript",
            "version": "1.0.0"
          },
          "device": {
            "id": "0572f78fa49c648e",
            "name": "generic_x86_arm",
            "type": "Android",
            "model": "AOSP on IA Emulator",
            "manufacturer": "Google",
            "adTrackingEnabled": true,
            "advertisingId": "44c97318-9040-4361-8bc7-4eb30f665ca8"
          },
          "traits": {
            "email": "alex@example.com",
            "phone": "+1-202-555-0146",
            "firstName": "John",
            "lastName": "Gomes",
            "city": "London",
            "state": "England",
            "countryCode": "GB",
            "postalCode": "EC3M",
            "streetAddress": "71 Cherry Court SOUTHAMPTON SO53 5PD UK"
          },
          "library": {
            "name": "RudderLabs JavaScript SDK",
            "version": "1.0.0"
          },
          "userAgent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/77.0.3865.90 Safari/537.36",
          "locale": "en-US",
          "ip": "0.0.0.0",
          "os": {
            "name": "",
            "version": ""
          },
          "screen": {
            "density": 2
          }
        },
        "event": "Promotion Clicked",
        "messageId": "5e10d13a-bf9a-44bf-b884-43a9e591ea71",
        "originalTimestamp": "2019-10-14T11:15:18.299Z",
        "anonymousId": "00000000000000000000000000",
        "userId": "12345",
        "properties": {
          "gbraid": "gbraid",
          "wbraid": "wbraid",
          "externalAttributionCredit": 10,
          "externalAttributionModel": "externalAttributionModel",
          "conversionCustomVariable": "conversionCustomVariable",
          "gclid": "gclid",
          "conversionDateTime": "2022-01-01 12:32:45-08:00",
          "conversionValue": "1",
          "currency": "GBP"
        },
        "integrations": {
          "All": true
        },
        "name": "ApplicationLoaded",
        "sentAt": "2019-10-14T11:15:53.296Z"
      },
      "metadata": {
        "secret": {
          "access_token": "abcd1234",
          "refresh_token": "efgh5678",
          "developer_token": "ijkl91011"
        }
      },
      "destination": {
        "Config": {
          "customerId": "962-581-2972",
          "subAccount": false,
          "eventsToOfflineConversionsTypeMapping": [
            {
              "from": "Sign up completed",
              "to": "click"
            },
            {
              "from": "Download",
              "to": "call"
            },
            {
              "from": "Promotion Clicked",
              "to": "click"
            },
            {
              "from": "Product Searched",
              "to": "call"
            }
          ],
          "eventsToConversionsNamesMapping": [
            {
              "from": "Sign up completed",
              "to": "Sign-up - click"
            },
            {
              "from": "Download",
              "to": "Page view"
            },
            {
              "from": "Promotion Clicked",
              "to": "Sign-up - click"
            },
            {
              "from": "Product Searched",
              "to": "search"
            }
          ],
          "customVariables": [
            {
              "from": "value",
              "to": "revenue"
            },
            {
              "from": "total",
              "to": "cost"
            }
          ],
          "UserIdentifierSource": "THIRD_PARTY",
          "conversionEnvironment": "WEB",
          "hashUserIdentifier": true,
          "defaultUserIdentifier": "email",
          "validateOnly": false,
          "rudderAccountId": "2EOknn1JNH7WK1MfNku4fGYKkRK"
        }
      }
    },
    "output": {
      "metadata": {
        "secret": {
          "access_token": "abcd1234",
          "refresh_token": "efgh5678",
          "developer_token": "ijkl91011"
        }
      },
      "statusCode": 400,
      "error": "Message type is not present. Aborting message.",
      "statTags": {
        "destination": "google_adwords_offline_conversions",
        "stage": "transform",
        "scope": "exception"
      }
    }
  },
  {
    "description": "event name is not present",
    "input": {
      "message": {
        "channel": "web",
        "context": {
          "app": {
            "build": "1.0.0",
            "name": "RudderLabs JavaScript SDK",
            "namespace": "com.rudderlabs.javascript",
            "version": "1.0.0"
          },
          "device": {
            "id": "0572f78fa49c648e",
            "name": "generic_x86_arm",
            "type": "Android",
            "model": "AOSP on IA Emulator",
            "manufacturer": "Google",
            "adTrackingEnabled": true,
            "advertisingId": "44c97318-9040-4361-8bc7-4eb30f665ca8"
          },
          "traits": {
            "email": "alex@example.com",
            "phone": "+1-202-555-0146",
            "firstName": "John",
            "lastName": "Gomes",
            "city": "London",
            "state": "England",
            "countryCode": "GB",
            "postalCode": "EC3M",
            "streetAddress": "71 Cherry Court SOUTHAMPTON SO53 5PD UK"
          },
          "library": {
            "name": "RudderLabs JavaScript SDK",
            "version": "1.0.0"
          },
          "userAgent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/77.0.3865.90 Safari/537.36",
          "locale": "en-US",
          "ip": "0.0.0.0",
          "os": {
            "name": "",
            "version": ""
          },
          "screen": {
            "density": 2
          }
        },
        "type": "track",
        "messageId": "5e10d13a-bf9a-44bf-b884-43a9e591ea71",
        "originalTimestamp": "2019-10-14T11:15:18.299Z",
        "anonymousId": "00000000000000000000000000",
        "userId": "12345",
        "properties": {
          "gbraid": "gbraid",
          "wbraid": "wbraid",
          "externalAttributionCredit": 10,
          "externalAttributionModel": "externalAttributionModel",
          "conversionCustomVariable": "conversionCustomVariable",
          "gclid": "gclid",
          "conversionDateTime": "2022-01-01 12:32:45-08:00",
          "conversionValue": "1",
          "currency": "GBP"
        },
        "integrations": {
          "All": true
        },
        "name": "ApplicationLoaded",
        "sentAt": "2019-10-14T11:15:53.296Z"
      },
      "metadata": {
        "secret": {
          "access_token": "abcd1234",
          "refresh_token": "efgh5678",
          "developer_token": "ijkl91011"
        }
      },
      "destination": {
        "Config": {
          "customerId": "962-581-2972",
          "subAccount": false,
          "eventsToOfflineConversionsTypeMapping": [
            {
              "from": "Sign up completed",
              "to": "click"
            },
            {
              "from": "Download",
              "to": "call"
            },
            {
              "from": "Promotion Clicked",
              "to": "click"
            },
            {
              "from": "Product Searched",
              "to": "call"
            }
          ],
          "eventsToConversionsNamesMapping": [
            {
              "from": "Sign up completed",
              "to": "Sign-up - click"
            },
            {
              "from": "Download",
              "to": "Page view"
            },
            {
              "from": "Promotion Clicked",
              "to": "Sign-up - click"
            },
            {
              "from": "Product Searched",
              "to": "search"
            }
          ],
          "customVariables": [
            {
              "from": "value",
              "to": "revenue"
            },
            {
              "from": "total",
              "to": "cost"
            }
          ],
          "UserIdentifierSource": "THIRD_PARTY",
          "conversionEnvironment": "WEB",
          "hashUserIdentifier": true,
          "defaultUserIdentifier": "email",
          "validateOnly": false,
          "rudderAccountId": "2EOknn1JNH7WK1MfNku4fGYKkRK"
        }
      }
    },
    "output": {
      "metadata": {
        "secret": {
          "access_token": "abcd1234",
          "refresh_token": "efgh5678",
          "developer_token": "ijkl91011"
        }
      },
      "statusCode": 400,
      "error": "Event name is not present",
      "statTags": {
        "destination": "google_adwords_offline_conversions",
        "stage": "transform",
        "scope": "exception"
      }
    }
  },
  {
    "description": "invalid event name i.e event name not provided in config",
    "input": {
      "message": {
        "channel": "web",
        "context": {
          "app": {
            "build": "1.0.0",
            "name": "RudderLabs JavaScript SDK",
            "namespace": "com.rudderlabs.javascript",
            "version": "1.0.0"
          },
          "device": {
            "id": "0572f78fa49c648e",
            "name": "generic_x86_arm",
            "type": "Android",
            "model": "AOSP on IA Emulator",
            "manufacturer": "Google",
            "adTrackingEnabled": true,
            "advertisingId": "44c97318-9040-4361-8bc7-4eb30f665ca8"
          },
          "traits": {
            "email": "alex@example.com",
            "phone": "+1-202-555-0146",
            "firstName": "John",
            "lastName": "Gomes",
            "city": "London",
            "state": "England",
            "countryCode": "GB",
            "postalCode": "EC3M",
            "streetAddress": "71 Cherry Court SOUTHAMPTON SO53 5PD UK"
          },
          "library": {
            "name": "RudderLabs JavaScript SDK",
            "version": "1.0.0"
          },
          "userAgent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/77.0.3865.90 Safari/537.36",
          "locale": "en-US",
          "ip": "0.0.0.0",
          "os": {
            "name": "",
            "version": ""
          },
          "screen": {
            "density": 2
          }
        },
        "event": "purchase",
        "type": "track",
        "messageId": "5e10d13a-bf9a-44bf-b884-43a9e591ea71",
        "originalTimestamp": "2019-10-14T11:15:18.299Z",
        "anonymousId": "00000000000000000000000000",
        "userId": "12345",
        "properties": {
          "gbraid": "gbraid",
          "wbraid": "wbraid",
          "externalAttributionCredit": 10,
          "externalAttributionModel": "externalAttributionModel",
          "conversionCustomVariable": "conversionCustomVariable",
          "gclid": "gclid",
          "conversionDateTime": "2022-01-01 12:32:45-08:00",
          "conversionValue": "1",
          "currency": "GBP"
        },
        "integrations": {
          "All": true
        },
        "name": "ApplicationLoaded",
        "sentAt": "2019-10-14T11:15:53.296Z"
      },
      "metadata": {
        "secret": {
          "access_token": "abcd1234",
          "refresh_token": "efgh5678",
          "developer_token": "ijkl91011"
        }
      },
      "destination": {
        "Config": {
          "customerId": "962-581-2972",
          "subAccount": false,
          "eventsToOfflineConversionsTypeMapping": [
            {
              "from": "Sign up completed",
              "to": "click"
            },
            {
              "from": "Download",
              "to": "call"
            },
            {
              "from": "Promotion Clicked",
              "to": "click"
            },
            {
              "from": "Product Searched",
              "to": "call"
            }
          ],
          "eventsToConversionsNamesMapping": [
            {
              "from": "Sign up completed",
              "to": "Sign-up - click"
            },
            {
              "from": "Download",
              "to": "Page view"
            },
            {
              "from": "Promotion Clicked",
              "to": "Sign-up - click"
            },
            {
              "from": "Product Searched",
              "to": "search"
            }
          ],
          "customVariables": [
            {
              "from": "value",
              "to": "revenue"
            },
            {
              "from": "total",
              "to": "cost"
            }
          ],
          "UserIdentifierSource": "THIRD_PARTY",
          "conversionEnvironment": "WEB",
          "hashUserIdentifier": true,
          "defaultUserIdentifier": "email",
          "validateOnly": false,
          "rudderAccountId": "2EOknn1JNH7WK1MfNku4fGYKkRK"
        }
      }
    },
    "output": {
      "metadata": {
        "secret": {
          "access_token": "abcd1234",
          "refresh_token": "efgh5678",
          "developer_token": "ijkl91011"
        }
      },
      "statusCode": 400,
      "error": "Event name 'purchase' is not valid",
      "statTags": {
        "destination": "google_adwords_offline_conversions",
        "stage": "transform",
        "scope": "exception"
      }
    }
  },
  {
    "description": "click and call - passing all parameters for click and call conversions",
    "input": {
      "message": {
        "channel": "web",
        "context": {
          "app": {
            "build": "1.0.0",
            "name": "RudderLabs JavaScript SDK",
            "namespace": "com.rudderlabs.javascript",
            "version": "1.0.0"
          },
          "device": {
            "id": "0572f78fa49c648e",
            "name": "generic_x86_arm",
            "type": "Android",
            "model": "AOSP on IA Emulator",
            "manufacturer": "Google",
            "adTrackingEnabled": true,
            "advertisingId": "44c97318-9040-4361-8bc7-4eb30f665ca8"
          },
          "traits": {
            "phone": "+1-202-555-0146",
            "firstName": "John",
            "lastName": "Gomes",
            "city": "London",
            "state": "England",
            "countryCode": "GB",
            "postalCode": "EC3M",
            "streetAddress": "71 Cherry Court SOUTHAMPTON SO53 5PD UK"
          },
          "library": {
            "name": "RudderLabs JavaScript SDK",
            "version": "1.0.0"
          },
          "userAgent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/77.0.3865.90 Safari/537.36",
          "locale": "en-US",
          "ip": "0.0.0.0",
          "os": {
            "name": "",
            "version": ""
          },
          "screen": {
            "density": 2
          }
        },
        "event": "download",
        "type": "track",
        "messageId": "5e10d13a-bf9a-44bf-b884-43a9e591ea71",
        "originalTimestamp": "2019-10-14T11:15:18.299Z",
        "anonymousId": "00000000000000000000000000",
        "userId": "12345",
        "properties": {
          "gbraid": "gbraid",
          "wbraid": "wbraid",
          "externalAttributionCredit": 10,
          "externalAttributionModel": "externalAttributionModel",
          "conversionCustomVariable": "conversionCustomVariable",
          "value": "value",
          "merchantId": "merchantId",
          "feedCountryCode": "feedCountryCode",
          "feedLanguageCode": "feedLanguageCode",
          "localTransactionCost": 20,
          "products": [
            {
              "product_id": "507f1f77bcf86cd799439011",
              "quantity": "2",
              "price": "50",
              "sku": "45790-32",
              "name": "Monopoly: 3rd Edition",
              "position": "1",
              "category": "cars",
              "url": "https://www.example.com/product/path",
              "image_url": "https://www.example.com/product/path.jpg"
            }
          ],
          "userIdentifierSource": "FIRST_PARTY",
          "conversionEnvironment": "WEB",
          "gclid": "gclid",
          "conversionDateTime": "2022-01-01 12:32:45-08:00",
          "conversionValue": "1",
          "currency": "GBP",
          "callerId": "callerId",
          "callStartDateTime": "2022-08-28 15:01:30+05:30"
        },
        "integrations": {
          "All": true
        },
        "name": "ApplicationLoaded",
        "sentAt": "2019-10-14T11:15:53.296Z"
      },
      "metadata": {
        "secret": {
          "access_token": "abcd1234",
          "refresh_token": "efgh5678",
          "developer_token": "ijkl91011"
        }
      },
      "destination": {
        "Config": {
          "customerId": "962-581-2972",
          "subAccount": false,
          "eventsToOfflineConversionsTypeMapping": [
            {
              "from": "Sign up completed",
              "to": "click"
            },
            {
              "from": "Download",
              "to": "click"
            },
            {
              "from": "Download",
              "to": "call"
            },
            {
              "from": "Promotion Clicked",
              "to": "click"
            },
            {
              "from": "Product Searched",
              "to": "call"
            }
          ],
          "eventsToConversionsNamesMapping": [
            {
              "from": "Sign up completed",
              "to": "Sign-up - click"
            },
            {
              "from": "Download",
              "to": "Page view"
            },
            {
              "from": "Promotion Clicked",
              "to": "Sign-up - click"
            },
            {
              "from": "Product Searched",
              "to": "search"
            }
          ],
          "customVariables": [
            {
              "from": "value",
              "to": "revenue"
            },
            {
              "from": "total",
              "to": "cost"
            }
          ],
          "UserIdentifierSource": "THIRD_PARTY",
          "conversionEnvironment": "WEB",
          "hashUserIdentifier": true,
          "defaultUserIdentifier": "phone",
          "validateOnly": false,
          "rudderAccountId": "2EOknn1JNH7WK1MfNku4fGYKkRK"
        }
      }
    },
    "output": [
      {
        "version": "1",
        "type": "REST",
        "method": "POST",
        "endpoint": "https://googleads.googleapis.com/v13/customers/9625812972:uploadClickConversions",
        "headers": {
          "Authorization": "Bearer abcd1234",
          "Content-Type": "application/json",
          "developer-token": "ijkl91011"
        },
        "params": {
          "event": "Page view",
          "customerId": "9625812972",
          "customVariables": [
            {
              "from": "value",
              "to": "revenue"
            },
            {
              "from": "total",
              "to": "cost"
            }
          ],
          "properties": {
            "gbraid": "gbraid",
            "wbraid": "wbraid",
            "externalAttributionCredit": 10,
            "externalAttributionModel": "externalAttributionModel",
            "conversionCustomVariable": "conversionCustomVariable",
            "value": "value",
            "merchantId": "merchantId",
            "feedCountryCode": "feedCountryCode",
            "feedLanguageCode": "feedLanguageCode",
            "localTransactionCost": 20,
            "products": [
              {
                "product_id": "507f1f77bcf86cd799439011",
                "quantity": "2",
                "price": "50",
                "sku": "45790-32",
                "name": "Monopoly: 3rd Edition",
                "position": "1",
                "category": "cars",
                "url": "https://www.example.com/product/path",
                "image_url": "https://www.example.com/product/path.jpg"
              }
            ],
            "userIdentifierSource": "FIRST_PARTY",
            "conversionEnvironment": "WEB",
            "gclid": "gclid",
            "conversionDateTime": "2022-01-01 12:32:45-08:00",
            "conversionValue": "1",
            "currency": "GBP",
            "callerId": "callerId",
            "callStartDateTime": "2022-08-28 15:01:30+05:30"
          }
        },
        "body": {
          "JSON": {
            "conversions": [
              {
                "gbraid": "gbraid",
                "wbraid": "wbraid",
                "externalAttributionData": {
                  "externalAttributionCredit": 10,
                  "externalAttributionModel": "externalAttributionModel"
                },
                "cartData": {
                  "feedCountryCode": "feedCountryCode",
                  "feedLanguageCode": "feedLanguageCode",
                  "localTransactionCost": 20,
                  "items": [
                    {
                      "productId": "507f1f77bcf86cd799439011",
                      "quantity": 2,
                      "unitPrice": 50
                    }
                  ]
                },
                "userIdentifiers": [
                  {
                    "userIdentifierSource": "FIRST_PARTY",
                    "hashedPhoneNumber": "04e1dabb7c1348b72bfa87da179c9697c69af74827649266a5da8cdbb367abcd"
                  }
                ],
                "conversionEnvironment": "WEB",
                "gclid": "gclid",
                "conversionDateTime": "2022-01-01 12:32:45-08:00",
                "conversionValue": 1,
                "currencyCode": "GBP"
              }
            ],
            "partialFailure": true
          },
          "JSON_ARRAY": {},
          "XML": {},
          "FORM": {}
        },
        "files": {}
      },
      {
        "version": "1",
        "type": "REST",
        "method": "POST",
        "endpoint": "https://googleads.googleapis.com/v13/customers/9625812972:uploadCallConversions",
        "headers": {
          "Authorization": "Bearer abcd1234",
          "Content-Type": "application/json",
          "developer-token": "ijkl91011"
        },
        "params": {
          "event": "Page view",
          "customerId": "9625812972",
          "customVariables": [
            {
              "from": "value",
              "to": "revenue"
            },
            {
              "from": "total",
              "to": "cost"
            }
          ],
          "properties": {
            "gbraid": "gbraid",
            "wbraid": "wbraid",
            "externalAttributionCredit": 10,
            "externalAttributionModel": "externalAttributionModel",
            "conversionCustomVariable": "conversionCustomVariable",
            "value": "value",
            "merchantId": "merchantId",
            "feedCountryCode": "feedCountryCode",
            "feedLanguageCode": "feedLanguageCode",
            "localTransactionCost": 20,
            "products": [
              {
                "product_id": "507f1f77bcf86cd799439011",
                "quantity": "2",
                "price": "50",
                "sku": "45790-32",
                "name": "Monopoly: 3rd Edition",
                "position": "1",
                "category": "cars",
                "url": "https://www.example.com/product/path",
                "image_url": "https://www.example.com/product/path.jpg"
              }
            ],
            "userIdentifierSource": "FIRST_PARTY",
            "conversionEnvironment": "WEB",
            "gclid": "gclid",
            "conversionDateTime": "2022-01-01 12:32:45-08:00",
            "conversionValue": "1",
            "currency": "GBP",
            "callerId": "callerId",
            "callStartDateTime": "2022-08-28 15:01:30+05:30"
          }
        },
        "body": {
          "JSON": {
            "conversions": [
              {
                "callerId": "callerId",
                "callStartDateTime": "2022-08-28 15:01:30+05:30",
                "conversionDateTime": "2022-01-01 12:32:45-08:00",
                "conversionValue": 1,
                "currencyCode": "GBP"
              }
            ],
            "partialFailure": true
          },
          "JSON_ARRAY": {},
          "XML": {},
          "FORM": {}
        },
        "files": {}
      }
    ]
  },
  {
    "description": "click - passing just the minimum required parameters and check sub-account i.e (login-customer-id) request",
    "input": {
      "message": {
        "channel": "web",
        "context": {
          "app": {
            "build": "1.0.0",
            "name": "RudderLabs JavaScript SDK",
            "namespace": "com.rudderlabs.javascript",
            "version": "1.0.0"
          },
          "device": {},
          "traits": {
            "email": "alex@example.com"
          },
          "library": {
            "name": "RudderLabs JavaScript SDK",
            "version": "1.0.0"
          },
          "userAgent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/77.0.3865.90 Safari/537.36",
          "locale": "en-US",
          "ip": "0.0.0.0",
          "os": {
            "name": "",
            "version": ""
          },
          "screen": {
            "density": 2
          }
        },
        "event": "Promotion Clicked",
        "type": "track",
        "messageId": "5e10d13a-bf9a-44bf-b884-43a9e591ea71",
        "originalTimestamp": "2019-10-14T11:15:18.299Z",
        "anonymousId": "00000000000000000000000000",
        "userId": "12345",
        "properties": {
          "gclid": "gclid",
          "conversionDateTime": "2022-01-01 12:32:45-08:00"
        },
        "integrations": {
          "All": true
        },
        "name": "ApplicationLoaded",
        "sentAt": "2019-10-14T11:15:53.296Z"
      },
      "metadata": {
        "secret": {
          "access_token": "abcd1234",
          "refresh_token": "efgh5678",
          "developer_token": "ijkl91011"
        }
      },
      "destination": {
        "Config": {
          "customerId": "962-581-2972",
          "subAccount": true,
          "loginCustomerId": "861-785-9087",
          "eventsToOfflineConversionsTypeMapping": [
            {
              "from": "Sign up completed",
              "to": "click"
            },
            {
              "from": "Download",
              "to": "call"
            },
            {
              "from": "Promotion Clicked",
              "to": "click"
            },
            {
              "from": "Product Searched",
              "to": "call"
            }
          ],
          "eventsToConversionsNamesMapping": [
            {
              "from": "Sign up completed",
              "to": "Sign-up - click"
            },
            {
              "from": "Download",
              "to": "Page view"
            },
            {
              "from": "Promotion Clicked",
              "to": "Sign-up - click"
            },
            {
              "from": "Product Searched",
              "to": "search"
            }
          ],
          "customVariables": [
            {
              "from": "value",
              "to": "revenue"
            },
            {
              "from": "total",
              "to": "cost"
            }
          ],
          "UserIdentifierSource": "THIRD_PARTY",
          "conversionEnvironment": "WEB",
          "hashUserIdentifier": true,
          "defaultUserIdentifier": "email",
          "validateOnly": false,
          "rudderAccountId": "2EOknn1JNH7WK1MfNku4fGYKkRK"
        }
      }
    },
    "output": [
      {
        "version": "1",
        "type": "REST",
        "method": "POST",
        "endpoint": "https://googleads.googleapis.com/v13/customers/9625812972:uploadClickConversions",
        "headers": {
          "Authorization": "Bearer abcd1234",
          "Content-Type": "application/json",
          "developer-token": "ijkl91011",
          "login-customer-id": "8617859087"
        },
        "params": {
          "event": "Sign-up - click",
          "customerId": "9625812972",
          "customVariables": [
            {
              "from": "value",
              "to": "revenue"
            },
            {
              "from": "total",
              "to": "cost"
            }
          ],
          "properties": {
            "gclid": "gclid",
            "conversionDateTime": "2022-01-01 12:32:45-08:00"
          }
        },
        "body": {
          "JSON": {
            "conversions": [
              {
                "gclid": "gclid",
                "conversionDateTime": "2022-01-01 12:32:45-08:00",
                "conversionEnvironment": "WEB",
                "userIdentifiers": [
                  {
                    "hashedEmail": "6db61e6dcbcf2390e4a46af426f26a133a3bee45021422fc7ae86e9136f14110",
                    "userIdentifierSource": "THIRD_PARTY"
                  }
                ]
              }
            ],
            "partialFailure": true
          },
          "JSON_ARRAY": {},
          "XML": {},
          "FORM": {}
        },
        "files": {}
      }
    ]
  },
  {
    "description": "call - passing just the minimum required parameter",
    "input": {
      "message": {
        "channel": "web",
        "context": {
          "app": {
            "build": "1.0.0",
            "name": "RudderLabs JavaScript SDK",
            "namespace": "com.rudderlabs.javascript",
            "version": "1.0.0"
          },
          "device": {},
          "traits": {},
          "library": {
            "name": "RudderLabs JavaScript SDK",
            "version": "1.0.0"
          },
          "userAgent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/77.0.3865.90 Safari/537.36",
          "locale": "en-US",
          "ip": "0.0.0.0",
          "os": {
            "name": "",
            "version": ""
          },
          "screen": {
            "density": 2
          }
        },
        "event": "Product Searched",
        "type": "track",
        "messageId": "5e10d13a-bf9a-44bf-b884-43a9e591ea71",
        "originalTimestamp": "2019-10-14T11:15:18.299Z",
        "anonymousId": "00000000000000000000000000",
        "userId": "12345",
        "properties": {
          "callerId": "callerId",
          "callStartDateTime": "2022-08-28 15:01:30+05:30",
          "conversionDateTime": "2022-01-01 12:32:45-08:00"
        },
        "integrations": {
          "All": true
        },
        "name": "ApplicationLoaded",
        "sentAt": "2019-10-14T11:15:53.296Z"
      },
      "metadata": {
        "secret": {
          "access_token": "abcd1234",
          "refresh_token": "efgh5678",
          "developer_token": "ijkl91011"
        }
      },
      "destination": {
        "Config": {
          "customerId": "962-581-2972",
          "subAccount": false,
          "eventsToOfflineConversionsTypeMapping": [
            {
              "from": "Sign up completed",
              "to": "click"
            },
            {
              "from": "Download",
              "to": "call"
            },
            {
              "from": "Promotion Clicked",
              "to": "click"
            },
            {
              "from": "Product Searched",
              "to": "call"
            }
          ],
          "eventsToConversionsNamesMapping": [
            {
              "from": "Sign up completed",
              "to": "Sign-up - click"
            },
            {
              "from": "Download",
              "to": "Page view"
            },
            {
              "from": "Promotion Clicked",
              "to": "Sign-up - click"
            },
            {
              "from": "Product Searched",
              "to": "search"
            }
          ],
          "customVariables": [
            {
              "from": "value",
              "to": "revenue"
            },
            {
              "from": "total",
              "to": "cost"
            }
          ],
          "UserIdentifierSource": "THIRD_PARTY",
          "conversionEnvironment": "WEB",
          "hashUserIdentifier": true,
          "defaultUserIdentifier": "email",
          "validateOnly": false,
          "rudderAccountId": "2EOknn1JNH7WK1MfNku4fGYKkRK"
        }
      }
    },
    "output": [
      {
        "version": "1",
        "type": "REST",
        "method": "POST",
        "endpoint": "https://googleads.googleapis.com/v13/customers/9625812972:uploadCallConversions",
        "headers": {
          "Authorization": "Bearer abcd1234",
          "Content-Type": "application/json",
          "developer-token": "ijkl91011"
        },
        "params": {
          "event": "search",
          "customerId": "9625812972",
          "customVariables": [
            {
              "from": "value",
              "to": "revenue"
            },
            {
              "from": "total",
              "to": "cost"
            }
          ],
          "properties": {
            "callerId": "callerId",
            "callStartDateTime": "2022-08-28 15:01:30+05:30",
            "conversionDateTime": "2022-01-01 12:32:45-08:00"
          }
        },
        "body": {
          "JSON": {
            "conversions": [
              {
                "callerId": "callerId",
                "callStartDateTime": "2022-08-28 15:01:30+05:30",
                "conversionDateTime": "2022-01-01 12:32:45-08:00"
              }
            ],
            "partialFailure": true
          },
          "JSON_ARRAY": {},
          "XML": {},
          "FORM": {}
        },
        "files": {}
      }
    ]
  },
  {
    "description": "call - take conversionDateTime from originalTimestamp",
    "input": {
      "message": {
        "channel": "web",
        "context": {
          "app": {
            "build": "1.0.0",
            "name": "RudderLabs JavaScript SDK",
            "namespace": "com.rudderlabs.javascript",
            "version": "1.0.0"
          },
          "device": {
            "id": "0572f78fa49c648e",
            "name": "generic_x86_arm",
            "type": "Android",
            "model": "AOSP on IA Emulator",
            "manufacturer": "Google",
            "adTrackingEnabled": true,
            "advertisingId": "44c97318-9040-4361-8bc7-4eb30f665ca8"
          },
          "traits": {
            "email": "alex@example.com",
            "phone": "+1-202-555-0146",
            "firstName": "John",
            "lastName": "Gomes",
            "city": "London",
            "state": "England",
            "countryCode": "GB",
            "postalCode": "EC3M",
            "streetAddress": "71 Cherry Court SOUTHAMPTON SO53 5PD UK"
          },
          "library": {
            "name": "RudderLabs JavaScript SDK",
            "version": "1.0.0"
          },
          "userAgent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/77.0.3865.90 Safari/537.36",
          "locale": "en-US",
          "ip": "0.0.0.0",
          "os": {
            "name": "",
            "version": ""
          },
          "screen": {
            "density": 2
          }
        },
        "event": "Product Searched",
        "type": "track",
        "messageId": "5e10d13a-bf9a-44bf-b884-43a9e591ea71",
        "originalTimestamp": "2022-09-20T03:20:04.000Z",
        "anonymousId": "00000000000000000000000000",
        "userId": "12345",
        "properties": {
          "externalAttributionCredit": 10,
          "externalAttributionModel": "externalAttributionModel",
          "merchantId": "merchantId",
          "feedCountryCode": "feedCountryCode",
          "feedLanguageCode": "feedLanguageCode",
          "localTransactionCost": 20,
          "products": [
            {
              "product_id": "507f1f77bcf86cd799439011",
              "quantity": "2",
              "price": "50",
              "sku": "45790-32",
              "name": "Monopoly: 3rd Edition",
              "position": "1",
              "category": "cars",
              "url": "https://www.example.com/product/path",
              "image_url": "https://www.example.com/product/path.jpg"
            }
          ],
          "userIdentifierSource": "FIRST_PARTY",
          "conversionEnvironment": "WEB",
          "gclid": "gclid",

          "conversionCustomVariable": "conversionCustomVariable",
          "value": "value",

          "callerId": "callerId",
          "callStartDateTime": "2022-08-28 15:01:30+05:30",
          "conversionValue": "1",
          "currency": "GBP"
        },
        "integrations": {
          "All": true
        },
        "name": "ApplicationLoaded",
        "sentAt": "2019-10-14T11:15:53.296Z"
      },
      "metadata": {
        "secret": {
          "access_token": "abcd1234",
          "refresh_token": "efgh5678",
          "developer_token": "ijkl91011"
        }
      },
      "destination": {
        "Config": {
          "customerId": "962-581-2972",
          "subAccount": false,
          "eventsToOfflineConversionsTypeMapping": [
            {
              "from": "Sign up completed",
              "to": "click"
            },
            {
              "from": "Download",
              "to": "call"
            },
            {
              "from": "Promotion Clicked",
              "to": "click"
            },
            {
              "from": "Product Searched",
              "to": "call"
            }
          ],
          "eventsToConversionsNamesMapping": [
            {
              "from": "Sign up completed",
              "to": "Sign-up - click"
            },
            {
              "from": "Download",
              "to": "Page view"
            },
            {
              "from": "Promotion Clicked",
              "to": "Sign-up - click"
            },
            {
              "from": "Product Searched",
              "to": "search"
            }
          ],
          "customVariables": [
            {
              "from": "value",
              "to": "revenue"
            },
            {
              "from": "total",
              "to": "cost"
            }
          ],
          "UserIdentifierSource": "THIRD_PARTY",
          "conversionEnvironment": "WEB",
          "hashUserIdentifier": true,
          "defaultUserIdentifier": "email",
          "validateOnly": false,
          "rudderAccountId": "2EOknn1JNH7WK1MfNku4fGYKkRK"
        }
      }
    },
    "output": [
      {
        "version": "1",
        "type": "REST",
        "method": "POST",
        "endpoint": "https://googleads.googleapis.com/v13/customers/9625812972:uploadCallConversions",
        "headers": {
          "Authorization": "Bearer abcd1234",
          "Content-Type": "application/json",
          "developer-token": "ijkl91011"
        },
        "params": {
          "event": "search",
          "customerId": "9625812972",
          "customVariables": [
            {
              "from": "value",
              "to": "revenue"
            },
            {
              "from": "total",
              "to": "cost"
            }
          ],
          "properties": {
            "externalAttributionCredit": 10,
            "externalAttributionModel": "externalAttributionModel",
            "merchantId": "merchantId",
            "feedCountryCode": "feedCountryCode",
            "feedLanguageCode": "feedLanguageCode",
            "localTransactionCost": 20,
            "products": [
              {
                "product_id": "507f1f77bcf86cd799439011",
                "quantity": "2",
                "price": "50",
                "sku": "45790-32",
                "name": "Monopoly: 3rd Edition",
                "position": "1",
                "category": "cars",
                "url": "https://www.example.com/product/path",
                "image_url": "https://www.example.com/product/path.jpg"
              }
            ],
            "userIdentifierSource": "FIRST_PARTY",
            "conversionEnvironment": "WEB",
            "gclid": "gclid",
            "conversionCustomVariable": "conversionCustomVariable",
            "value": "value",
            "callerId": "callerId",
            "callStartDateTime": "2022-08-28 15:01:30+05:30",
            "conversionValue": "1",
            "currency": "GBP"
          }
        },
        "body": {
          "JSON": {
            "conversions": [
              {
                "callerId": "callerId",
                "callStartDateTime": "2022-08-28 15:01:30+05:30",
                "conversionDateTime": "2022-09-20 03:20:04+00:00",
                "conversionValue": 1,
                "currencyCode": "GBP"
              }
            ],
            "partialFailure": true
          },
          "JSON_ARRAY": {},
          "XML": {},
          "FORM": {}
        },
        "files": {}
      }
    ]
  },
  {
    "description": "click - do not hash user identifier (set to false)",
    "input": {
      "message": {
        "channel": "web",
        "context": {
          "app": {
            "build": "1.0.0",
            "name": "RudderLabs JavaScript SDK",
            "namespace": "com.rudderlabs.javascript",
            "version": "1.0.0"
          },
          "device": {},
          "traits": {
            "email": "alex@example.com",
            "phone": "+1-202-555-0146"
          },
          "library": {
            "name": "RudderLabs JavaScript SDK",
            "version": "1.0.0"
          },
          "userAgent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/77.0.3865.90 Safari/537.36",
          "locale": "en-US",
          "ip": "0.0.0.0",
          "os": {
            "name": "",
            "version": ""
          },
          "screen": {
            "density": 2
          }
        },
        "event": "Promotion Clicked",
        "type": "track",
        "messageId": "5e10d13a-bf9a-44bf-b884-43a9e591ea71",
        "originalTimestamp": "2019-10-14T11:15:18.299Z",
        "anonymousId": "00000000000000000000000000",
        "userId": "12345",
        "properties": {
          "gclid": "gclid",
          "conversionDateTime": "2022-01-01 12:32:45-08:00"
        },
        "integrations": {
          "All": true
        },
        "name": "ApplicationLoaded",
        "sentAt": "2019-10-14T11:15:53.296Z"
      },
      "metadata": {
        "secret": {
          "access_token": "abcd1234",
          "refresh_token": "efgh5678",
          "developer_token": "ijkl91011"
        }
      },
      "destination": {
        "Config": {
          "customerId": "962-581-2972",
          "subAccount": false,
          "loginCustomerId": "",
          "eventsToOfflineConversionsTypeMapping": [
            {
              "from": "Sign up completed",
              "to": "click"
            },
            {
              "from": "Download",
              "to": "call"
            },
            {
              "from": "Promotion Clicked",
              "to": "click"
            },
            {
              "from": "Product Searched",
              "to": "call"
            }
          ],
          "eventsToConversionsNamesMapping": [
            {
              "from": "Sign up completed",
              "to": "Sign-up - click"
            },
            {
              "from": "Download",
              "to": "Page view"
            },
            {
              "from": "Promotion Clicked",
              "to": "Sign-up - click"
            },
            {
              "from": "Product Searched",
              "to": "search"
            }
          ],
          "customVariables": [
            {
              "from": "value",
              "to": "revenue"
            },
            {
              "from": "total",
              "to": "cost"
            }
          ],
          "UserIdentifierSource": "THIRD_PARTY",
          "conversionEnvironment": "WEB",
          "hashUserIdentifier": false,
          "defaultUserIdentifier": "email",
          "validateOnly": false,
          "rudderAccountId": "2EOknn1JNH7WK1MfNku4fGYKkRK"
        }
      }
    },
    "output": [
      {
        "version": "1",
        "type": "REST",
        "method": "POST",
        "endpoint": "https://googleads.googleapis.com/v13/customers/9625812972:uploadClickConversions",
        "headers": {
          "Authorization": "Bearer abcd1234",
          "Content-Type": "application/json",
          "developer-token": "ijkl91011"
        },
        "params": {
          "event": "Sign-up - click",
          "customerId": "9625812972",
          "customVariables": [
            {
              "from": "value",
              "to": "revenue"
            },
            {
              "from": "total",
              "to": "cost"
            }
          ],
          "properties": {
            "gclid": "gclid",
            "conversionDateTime": "2022-01-01 12:32:45-08:00"
          }
        },
        "body": {
          "JSON": {
            "conversions": [
              {
                "gclid": "gclid",
                "conversionDateTime": "2022-01-01 12:32:45-08:00",
                "conversionEnvironment": "WEB",
                "userIdentifiers": [
                  {
                    "userIdentifierSource": "THIRD_PARTY",
                    "hashedEmail": "alex@example.com"
                  }
                ]
              }
            ],
            "partialFailure": true
          },
          "JSON_ARRAY": {},
          "XML": {},
          "FORM": {}
        },
        "files": {}
      }
    ]
  },
  {
    "description": "message type not present",
    "input": {
      "message": {
        "channel": "web",
        "context": {
          "app": {
            "build": "1.0.0",
            "name": "RudderLabs JavaScript SDK",
            "namespace": "com.rudderlabs.javascript",
            "version": "1.0.0"
          },
          "device": {},
          "traits": {
            "email": "alex@example.com",
            "phone": "+1-202-555-0146"
          },
          "library": {
            "name": "RudderLabs JavaScript SDK",
            "version": "1.0.0"
          },
          "userAgent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/77.0.3865.90 Safari/537.36",
          "locale": "en-US",
          "ip": "0.0.0.0",
          "os": {
            "name": "",
            "version": ""
          },
          "screen": {
            "density": 2
          }
        },
        "event": "Promotion Clicked",
        "type": "page",
        "messageId": "5e10d13a-bf9a-44bf-b884-43a9e591ea71",
        "originalTimestamp": "2019-10-14T11:15:18.299Z",
        "anonymousId": "00000000000000000000000000",
        "userId": "12345",
        "properties": {
          "gclid": "gclid",
          "conversionDateTime": "2022-01-01 12:32:45-08:00"
        },
        "integrations": {
          "All": true
        },
        "name": "ApplicationLoaded",
        "sentAt": "2019-10-14T11:15:53.296Z"
      },
      "metadata": {
        "secret": {
          "access_token": "abcd1234",
          "refresh_token": "efgh5678",
          "developer_token": "ijkl91011"
        }
      },
      "destination": {
        "Config": {
          "customerId": "962-581-2972",
          "subAccount": false,
          "loginCustomerId": "",
          "eventsToOfflineConversionsTypeMapping": [
            {
              "from": "Sign up completed",
              "to": "click"
            },
            {
              "from": "Download",
              "to": "call"
            },
            {
              "from": "Promotion Clicked",
              "to": "click"
            },
            {
              "from": "Product Searched",
              "to": "call"
            }
          ],
          "eventsToConversionsNamesMapping": [
            {
              "from": "Sign up completed",
              "to": "Sign-up - click"
            },
            {
              "from": "Download",
              "to": "Page view"
            },
            {
              "from": "Promotion Clicked",
              "to": "Sign-up - click"
            },
            {
              "from": "Product Searched",
              "to": "search"
            }
          ],
          "customVariables": [
            {
              "from": "value",
              "to": "revenue"
            },
            {
              "from": "total",
              "to": "cost"
            }
          ],
          "UserIdentifierSource": "THIRD_PARTY",
          "conversionEnvironment": "WEB",
          "hashUserIdentifier": false,
          "defaultUserIdentifier": "email",
          "validateOnly": false,
          "rudderAccountId": "2EOknn1JNH7WK1MfNku4fGYKkRK"
        }
      }
    },
    "output": {
      "metadata": {
        "secret": null
      },
      "statusCode": 400,
      "error": "Message type page not supported",
      "statTags": {
        "destination": "google_adwords_offline_conversions",
        "stage": "transform",
        "scope": "exception"
      }
    }
  },
  {
    "description": "check for subaccount required field i.e loginCustomerId",
    "input": {
      "message": {
        "channel": "web",
        "context": {
          "app": {
            "build": "1.0.0",
            "name": "RudderLabs JavaScript SDK",
            "namespace": "com.rudderlabs.javascript",
            "version": "1.0.0"
          },
          "device": {},
          "traits": {
            "email": "alex@example.com",
            "phone": "+1-202-555-0146"
          },
          "library": {
            "name": "RudderLabs JavaScript SDK",
            "version": "1.0.0"
          },
          "userAgent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/77.0.3865.90 Safari/537.36",
          "locale": "en-US",
          "ip": "0.0.0.0",
          "os": {
            "name": "",
            "version": ""
          },
          "screen": {
            "density": 2
          }
        },
        "event": "Promotion Clicked",
        "type": "track",
        "messageId": "5e10d13a-bf9a-44bf-b884-43a9e591ea71",
        "originalTimestamp": "2019-10-14T11:15:18.299Z",
        "anonymousId": "00000000000000000000000000",
        "userId": "12345",
        "properties": {
          "gclid": "gclid",
          "conversionDateTime": "2022-01-01 12:32:45-08:00"
        },
        "integrations": {
          "All": true
        },
        "name": "ApplicationLoaded",
        "sentAt": "2019-10-14T11:15:53.296Z"
      },
      "metadata": {
        "secret": {
          "access_token": "abcd1234",
          "refresh_token": "efgh5678",
          "developer_token": "ijkl91011"
        }
      },
      "destination": {
        "Config": {
          "customerId": "962-581-2972",
          "subAccount": true,
          "loginCustomerId": "",
          "eventsToOfflineConversionsTypeMapping": [
            {
              "from": "Sign up completed",
              "to": "click"
            },
            {
              "from": "Download",
              "to": "call"
            },
            {
              "from": "Promotion Clicked",
              "to": "click"
            },
            {
              "from": "Product Searched",
              "to": "call"
            }
          ],
          "eventsToConversionsNamesMapping": [
            {
              "from": "Sign up completed",
              "to": "Sign-up - click"
            },
            {
              "from": "Download",
              "to": "Page view"
            },
            {
              "from": "Promotion Clicked",
              "to": "Sign-up - click"
            },
            {
              "from": "Product Searched",
              "to": "search"
            }
          ],
          "customVariables": [
            {
              "from": "value",
              "to": "revenue"
            },
            {
              "from": "total",
              "to": "cost"
            }
          ],
          "UserIdentifierSource": "THIRD_PARTY",
          "conversionEnvironment": "WEB",
          "hashUserIdentifier": false,
          "defaultUserIdentifier": "email",
          "validateOnly": false,
          "rudderAccountId": "2EOknn1JNH7WK1MfNku4fGYKkRK"
        }
      }
    },
    "output": {
      "metadata": {
        "secret": null
      },
      "statusCode": 400,
      "error": "loginCustomerId is required as subAccount is enabled",
      "statTags": {
        "destination": "google_adwords_offline_conversions",
        "stage": "transform",
        "scope": "exception"
      }
    }
  },
  {
    "description": "click - products parameters from the properties",
    "input": {
      "message": {
        "channel": "web",
        "context": {
          "app": {
            "build": "1.0.0",
            "name": "RudderLabs JavaScript SDK",
            "namespace": "com.rudderlabs.javascript",
            "version": "1.0.0"
          },
          "device": {},
          "traits": {
            "email": "alex@example.com"
          },
          "library": {
            "name": "RudderLabs JavaScript SDK",
            "version": "1.0.0"
          },
          "userAgent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/77.0.3865.90 Safari/537.36",
          "locale": "en-US",
          "ip": "0.0.0.0",
          "os": {
            "name": "",
            "version": ""
          },
          "screen": {
            "density": 2
          }
        },
        "event": "Product Clicked",
        "type": "track",
        "messageId": "5e10d13a-bf9a-44bf-b884-43a9e591ea71",
        "originalTimestamp": "2019-10-14T11:15:18.299Z",
        "anonymousId": "00000000000000000000000000",
        "userId": "12345",
        "properties": {
          "gclid": "gclid",
          "conversionDateTime": "2022-01-01 12:32:45-08:00",
          "product_id": "123445",
          "quantity": 123
        },
        "integrations": {
          "All": true
        },
        "name": "ApplicationLoaded",
        "sentAt": "2019-10-14T11:15:53.296Z"
      },
      "metadata": {
        "secret": {
          "access_token": "abcd1234",
          "refresh_token": "efgh5678",
          "developer_token": "ijkl91011"
        }
      },
      "destination": {
        "Config": {
          "customerId": "962-581-2972",
          "subAccount": true,
          "loginCustomerId": "861-785-9087",
          "eventsToOfflineConversionsTypeMapping": [
            {
              "from": "Sign up completed",
              "to": "click"
            },
            {
              "from": "Download",
              "to": "call"
            },
            {
              "from": "Product Clicked",
              "to": "click"
            },
            {
              "from": "Product Searched",
              "to": "call"
            }
          ],
          "eventsToConversionsNamesMapping": [
            {
              "from": "Sign up completed",
              "to": "Sign-up - click"
            },
            {
              "from": "Download",
              "to": "Page view"
            },
            {
              "from": "Product Clicked",
              "to": "Sign-up - click"
            },
            {
              "from": "Product Searched",
              "to": "search"
            }
          ],
          "customVariables": [
            {
              "from": "value",
              "to": "revenue"
            },
            {
              "from": "total",
              "to": "cost"
            }
          ],
          "UserIdentifierSource": "THIRD_PARTY",
          "conversionEnvironment": "WEB",
          "hashUserIdentifier": true,
          "defaultUserIdentifier": "email",
          "validateOnly": false,
          "rudderAccountId": "2EOknn1JNH7WK1MfNku4fGYKkRK"
        }
      }
    },
    "output": [
      {
        "version": "1",
        "type": "REST",
        "method": "POST",
        "endpoint": "https://googleads.googleapis.com/v13/customers/9625812972:uploadClickConversions",
        "headers": {
          "Authorization": "Bearer abcd1234",
          "Content-Type": "application/json",
          "developer-token": "ijkl91011",
          "login-customer-id": "8617859087"
        },
        "params": {
          "event": "Sign-up - click",
          "customerId": "9625812972",
          "customVariables": [
            {
              "from": "value",
              "to": "revenue"
            },
            {
              "from": "total",
              "to": "cost"
            }
          ],
          "properties": {
            "gclid": "gclid",
            "conversionDateTime": "2022-01-01 12:32:45-08:00",
            "product_id": "123445",
            "quantity": 123
          }
        },
        "body": {
          "JSON": {
            "conversions": [
              {
                "gclid": "gclid",
                "conversionDateTime": "2022-01-01 12:32:45-08:00",
                "conversionEnvironment": "WEB",
                "userIdentifiers": [
                  {
                    "hashedEmail": "6db61e6dcbcf2390e4a46af426f26a133a3bee45021422fc7ae86e9136f14110",
                    "userIdentifierSource": "THIRD_PARTY"
                  }
                ],
                "cartData": {
                  "items": [
                    {
                      "productId": "123445",
                      "quantity": 123
                    }
                  ]
                }
              }
            ],
            "partialFailure": true
          },
          "JSON_ARRAY": {},
          "XML": {},
          "FORM": {}
        },
        "files": {}
      }
    ]
  },
  {
    "description": "click - check for email or phone for user identifier",
    "input": {
      "message": {
        "channel": "web",
        "context": {
          "app": {
            "build": "1.0.0",
            "name": "RudderLabs JavaScript SDK",
            "namespace": "com.rudderlabs.javascript",
            "version": "1.0.0"
          },
          "device": {},
          "traits": {},
          "library": {
            "name": "RudderLabs JavaScript SDK",
            "version": "1.0.0"
          },
          "userAgent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/77.0.3865.90 Safari/537.36",
          "locale": "en-US",
          "ip": "0.0.0.0",
          "os": {
            "name": "",
            "version": ""
          },
          "screen": {
            "density": 2
          }
        },
        "event": "Product Clicked",
        "type": "track",
        "messageId": "5e10d13a-bf9a-44bf-b884-43a9e591ea71",
        "originalTimestamp": "2019-10-14T11:15:18.299Z",
        "anonymousId": "00000000000000000000000000",
        "userId": "12345",
        "properties": {
          "gclid": "gclid",
          "conversionDateTime": "2022-01-01 12:32:45-08:00",
          "product_id": "123445",
          "quantity": 123
        },
        "integrations": {
          "All": true
        },
        "name": "ApplicationLoaded",
        "sentAt": "2019-10-14T11:15:53.296Z"
      },
      "metadata": {
        "secret": {
          "access_token": "abcd1234",
          "refresh_token": "efgh5678",
          "developer_token": "ijkl91011"
        }
      },
      "destination": {
        "Config": {
          "customerId": "962-581-2972",
          "subAccount": true,
          "loginCustomerId": "861-785-9087",
          "eventsToOfflineConversionsTypeMapping": [
            {
              "from": "Sign up completed",
              "to": "click"
            },
            {
              "from": "Download",
              "to": "call"
            },
            {
              "from": "Product Clicked",
              "to": "click"
            },
            {
              "from": "Product Searched",
              "to": "call"
            }
          ],
          "eventsToConversionsNamesMapping": [
            {
              "from": "Sign up completed",
              "to": "Sign-up - click"
            },
            {
              "from": "Download",
              "to": "Page view"
            },
            {
              "from": "Product Clicked",
              "to": "Sign-up - click"
            },
            {
              "from": "Product Searched",
              "to": "search"
            }
          ],
          "customVariables": [
            {
              "from": "value",
              "to": "revenue"
            },
            {
              "from": "total",
              "to": "cost"
            }
          ],
          "UserIdentifierSource": "THIRD_PARTY",
          "conversionEnvironment": "WEB",
          "hashUserIdentifier": true,
          "defaultUserIdentifier": "email",
          "validateOnly": false,
          "rudderAccountId": "2EOknn1JNH7WK1MfNku4fGYKkRK"
        }
      }
    },
    "output": {
      "metadata": {
        "secret": null
      },
      "statusCode": 400,
      "error": "Either of email or phone is required for user identifier",
      "statTags": {
        "destination": "google_adwords_offline_conversions",
        "stage": "transform",
        "scope": "exception"
      }
    }
  },
  {
    "description": "click - email or phone is not required if user identifier is not present",
    "input": {
      "message": {
        "channel": "web",
        "context": {
          "app": {
            "build": "1.0.0",
            "name": "RudderLabs JavaScript SDK",
            "namespace": "com.rudderlabs.javascript",
            "version": "1.0.0"
          },
          "device": {},
          "traits": {},
          "library": {
            "name": "RudderLabs JavaScript SDK",
            "version": "1.0.0"
          },
          "userAgent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/77.0.3865.90 Safari/537.36",
          "locale": "en-US",
          "ip": "0.0.0.0",
          "os": {
            "name": "",
            "version": ""
          },
          "screen": {
            "density": 2
          }
        },
        "event": "Product Clicked",
        "type": "track",
        "messageId": "5e10d13a-bf9a-44bf-b884-43a9e591ea71",
        "originalTimestamp": "2019-10-14T11:15:18.299Z",
        "anonymousId": "00000000000000000000000000",
        "userId": "12345",
        "properties": {
          "gclid": "gclid",
          "conversionDateTime": "2022-01-01 12:32:45-08:00",
          "product_id": "123445",
          "quantity": 123
        },
        "integrations": {
          "All": true
        },
        "name": "ApplicationLoaded",
        "sentAt": "2019-10-14T11:15:53.296Z"
      },
      "metadata": {
        "secret": {
          "access_token": "abcd1234",
          "refresh_token": "efgh5678",
          "developer_token": "ijkl91011"
        }
      },
      "destination": {
        "Config": {
          "customerId": "962-581-2972",
          "subAccount": true,
          "loginCustomerId": "861-785-9087",
          "eventsToOfflineConversionsTypeMapping": [
            {
              "from": "Sign up completed",
              "to": "click"
            },
            {
              "from": "Download",
              "to": "call"
            },
            {
              "from": "Product Clicked",
              "to": "click"
            },
            {
              "from": "Product Searched",
              "to": "call"
            }
          ],
          "eventsToConversionsNamesMapping": [
            {
              "from": "Sign up completed",
              "to": "Sign-up - click"
            },
            {
              "from": "Download",
              "to": "Page view"
            },
            {
              "from": "Product Clicked",
              "to": "Sign-up - click"
            },
            {
              "from": "Product Searched",
              "to": "search"
            }
          ],
          "customVariables": [
            {
              "from": "value",
              "to": "revenue"
            },
            {
              "from": "total",
              "to": "cost"
            }
          ],
          "UserIdentifierSource": "none",
          "conversionEnvironment": "WEB",
          "hashUserIdentifier": true,
          "defaultUserIdentifier": "email",
          "validateOnly": false,
          "rudderAccountId": "2EOknn1JNH7WK1MfNku4fGYKkRK"
        }
      }
    },
    "output": [
      {
        "version": "1",
        "type": "REST",
        "method": "POST",
        "endpoint": "https://googleads.googleapis.com/v13/customers/9625812972:uploadClickConversions",
        "headers": {
          "Authorization": "Bearer abcd1234",
          "Content-Type": "application/json",
          "developer-token": "ijkl91011",
          "login-customer-id": "8617859087"
        },
        "params": {
          "event": "Sign-up - click",
          "customerId": "9625812972",
          "customVariables": [
            {
              "from": "value",
              "to": "revenue"
            },
            {
              "from": "total",
              "to": "cost"
            }
          ],
          "properties": {
            "gclid": "gclid",
            "conversionDateTime": "2022-01-01 12:32:45-08:00",
            "product_id": "123445",
            "quantity": 123
          }
        },
        "body": {
          "JSON": {
            "conversions": [
              {
                "gclid": "gclid",
                "conversionDateTime": "2022-01-01 12:32:45-08:00",
                "conversionEnvironment": "WEB",
                "cartData": {
                  "items": [
                    {
                      "productId": "123445",
                      "quantity": 123
                    }
                  ]
                }
              }
            ],
            "partialFailure": true
          },
          "JSON_ARRAY": {},
          "XML": {},
          "FORM": {}
        },
        "files": {}
      }
    ]
  }
]

[
  {
    "input": {
      "request": {
        "body": {
          "type": "REST",
          "endpoint": "https://api.amplitude.com/2/httpapi/test1",
          "method": "POST",
          "userId": "gabi_anonId_45",
          "headers": {
            "Content-Type": "application/json",
            "User-Agent": "RudderLabs"
          },
          "params": {},
          "body": {
            "FORM": {},
            "JSON": {
              "api_key": "c9d8a13b8bcab46a547f7be5200c483d",
              "events": [
                {
                  "app_name": "Rudder-CleverTap_Example",
                  "app_version": "1.0",
                  "time": 1619006730330,
                  "user_id": "gabi_userId_45",
                  "user_properties": {
                    "Residence": "Shibuya",
                    "city": "Tokyo",
                    "country": "JP",
                    "email": "gabi29@gmail.com",
                    "gender": "M",
                    "name": "User2 Gabi2",
                    "organization": "Company",
                    "region": "ABC",
                    "title": "Owner",
                    "zip": "100-0001"
                  }
                }
              ],
              "options": {
                "min_id_length": 1
              }
            },
            "JSON_ARRAY": {},
            "XML": {}
          },
          "files": {}
        }
      }
    },
    "expectedOutput": {
      "output": {
        "status": 200,
        "message": "[Generic Response Handler] Request for destination: any Processed Successfully",
        "destinationResponse": {
          "response": {
            "code": 200,
            "server_upload_time": 1639235302252,
            "payload_size_bytes": 863,
            "events_ingested": 1
          },
          "status": 200
        }
      }
    },
    "expectedProxyMethodParams": {
      "endpoint": "https://api.amplitude.com/2/httpapi/test1",
      "data": {
        "api_key": "c9d8a13b8bcab46a547f7be5200c483d",
        "events": [
          {
            "app_name": "Rudder-CleverTap_Example",
            "app_version": "1.0",
            "time": 1619006730330,
            "user_id": "gabi_userId_45",
            "user_properties": {
              "Residence": "Shibuya",
              "city": "Tokyo",
              "country": "JP",
              "email": "gabi29@gmail.com",
              "gender": "M",
              "name": "User2 Gabi2",
              "organization": "Company",
              "region": "ABC",
              "title": "Owner",
              "zip": "100-0001"
            }
          }
        ],
        "options": {
          "min_id_length": 1
        }
      },
      "params": {},
      "headers": {
        "Content-Type": "application/json",
        "User-Agent": "RudderLabs"
      },
      "method": "POST"
    },
    "mockResult": {
      "data": {
        "code": 200,
        "server_upload_time": 1639235302252,
        "payload_size_bytes": 863,
        "events_ingested": 1
      },
      "status": 200,
      "statusText": "OK",
      "headers": {
        "date": "Sat, 11 Dec 2021 15:08:22 GMT",
        "content-type": "application/json",
        "content-length": "93",
        "connection": "keep-alive",
        "access-control-allow-origin": "*",
        "access-control-allow-methods": "GET, POST",
        "strict-transport-security": "max-age=15768000"
      }
    }
  },
  {
    "input": {
      "request": {
        "body": {
          "type": "REST",
          "endpoint": "https://api.amplitude.com/2/httpapi/test2",
          "method": "POST",
          "userId": "gabi_anonId_45",
          "headers": {
            "Content-Type": "application/json",
            "User-Agent": "RudderLabs"
          },
          "params": {},
          "body": {
            "FORM": {},
            "JSON": {
              "api_key": "c9d8a13b8bcab46a547f7be5200c483d",
              "events": [
                {
                  "app_name": "Rudder-CleverTap_Example",
                  "app_version": "1.0",
                  "time": 1619006730330,
                  "user_id": "gabi_userId_45",
                  "user_properties": {
                    "Residence": "Shibuya",
                    "city": "Tokyo",
                    "country": "JP",
                    "email": "gabi29@gmail.com",
                    "gender": "M",
                    "name": "User2 Gabi2",
                    "organization": "Company",
                    "region": "ABC",
                    "title": "Owner",
                    "zip": "100-0001"
                  }
                }
              ],
              "options": {
                "min_id_length": 1
              }
            },
            "JSON_ARRAY": {},
            "XML": {}
          },
          "files": {}
        }
      }
    },
    "expectedOutput": {
      "output": {
        "status": 400,
        "message": "[Generic Response Handler] Request failed for destination any with status: 400",
        "destinationResponse": {
          "response": {
            "code": 400,
            "server_upload_time": 1639235302252,
            "payload_size_bytes": 863,
            "events_ingested": 0
          },
          "status": 400
        },
        "statTags": {
          "destType": "ANY",
          "errorCategory": "network",
          "errorType": "aborted",
          "feature": "dataDelivery",
          "implementation": "native",
          "module": "destination"
        }
      }
    },
    "expectedProxyMethodParams": {
      "endpoint": "https://api.amplitude.com/2/httpapi/test2",
      "data": {
        "api_key": "c9d8a13b8bcab46a547f7be5200c483d",
        "events": [
          {
            "app_name": "Rudder-CleverTap_Example",
            "app_version": "1.0",
            "time": 1619006730330,
            "user_id": "gabi_userId_45",
            "user_properties": {
              "Residence": "Shibuya",
              "city": "Tokyo",
              "country": "JP",
              "email": "gabi29@gmail.com",
              "gender": "M",
              "name": "User2 Gabi2",
              "organization": "Company",
              "region": "ABC",
              "title": "Owner",
              "zip": "100-0001"
            }
          }
        ],
        "options": {
          "min_id_length": 1
        }
      },
      "params": {},
      "headers": {
        "Content-Type": "application/json",
        "User-Agent": "RudderLabs"
      },
      "method": "POST"
    },
    "mockResult": {
      "response": {
        "data": {
          "code": 400,
          "server_upload_time": 1639235302252,
          "payload_size_bytes": 863,
          "events_ingested": 0
        },
        "status": 400,
        "statusText": "Bad Request",
        "headers": {
          "date": "Sat, 11 Dec 2021 15:08:22 GMT",
          "content-type": "application/json",
          "content-length": "93",
          "connection": "keep-alive",
          "access-control-allow-origin": "*",
          "access-control-allow-methods": "GET, POST",
          "strict-transport-security": "max-age=15768000"
        }
      }
    }
  },
  {
    "input": {
      "request": {
        "body": {
          "type": "REST",
          "endpoint": "https://api.amplitude.com/2/httpapi/test3",
          "method": "POST",
          "userId": "gabi_anonId_45",
          "headers": {
            "Content-Type": "application/json",
            "User-Agent": "RudderLabs"
          },
          "params": {},
          "body": {
            "FORM": {},
            "JSON": {
              "api_key": "c9d8a13b8bcab46a547f7be5200c483d",
              "events": [
                {
                  "app_name": "Rudder-CleverTap_Example",
                  "app_version": "1.0",
                  "time": 1619006730330,
                  "user_id": "gabi_userId_45",
                  "user_properties": {
                    "Residence": "Shibuya",
                    "city": "Tokyo",
                    "country": "JP",
                    "email": "gabi29@gmail.com",
                    "gender": "M",
                    "name": "User2 Gabi2",
                    "organization": "Company",
                    "region": "ABC",
                    "title": "Owner",
                    "zip": "100-0001"
                  }
                }
              ],
              "options": {
                "min_id_length": 1
              }
            },
            "JSON_ARRAY": {},
            "XML": {}
          },
          "files": {}
        }
      }
    },
    "expectedOutput": {
      "output": {
        "status": 400,
        "message": "[Generic Response Handler] Request failed for destination any with status: 400",
        "destinationResponse": {
          "response": "[[ENOTFOUND] :: DNS lookup failed]",
          "status": 400
        },
        "statTags": {
          "destType": "ANY",
          "errorCategory": "network",
          "errorType": "aborted",
          "feature": "dataDelivery",
          "implementation": "native",
          "module": "destination"
        }
      }
    },
    "expectedProxyMethodParams": {
      "endpoint": "https://api.amplitude.com/2/httpapi/test3",
      "data": {
        "api_key": "c9d8a13b8bcab46a547f7be5200c483d",
        "events": [
          {
            "app_name": "Rudder-CleverTap_Example",
            "app_version": "1.0",
            "time": 1619006730330,
            "user_id": "gabi_userId_45",
            "user_properties": {
              "Residence": "Shibuya",
              "city": "Tokyo",
              "country": "JP",
              "email": "gabi29@gmail.com",
              "gender": "M",
              "name": "User2 Gabi2",
              "organization": "Company",
              "region": "ABC",
              "title": "Owner",
              "zip": "100-0001"
            }
          }
        ],
        "options": {
          "min_id_length": 1
        }
      },
      "params": {},
      "headers": {
        "Content-Type": "application/json",
        "User-Agent": "RudderLabs"
      },
      "method": "POST"
    },
    "mockResult": {
      "code": "[ENOTFOUND] :: DNS lookup failed"
    }
  },
  {
    "input": {
      "request": {
        "body": {
          "type": "REST",
          "endpoint": "https://api.amplitude.com/2/httpapi/test4",
          "method": "POST",
          "userId": "gabi_anonId_45",
          "headers": {
            "Content-Type": "application/json",
            "User-Agent": "RudderLabs"
          },
          "params": {},
          "body": {
            "FORM": {},
            "JSON": {
              "api_key": "c9d8a13b8bcab46a547f7be5200c483d",
              "events": [
                {
                  "app_name": "Rudder-CleverTap_Example",
                  "app_version": "1.0",
                  "time": 1619006730330,
                  "user_id": "gabi_userId_45",
                  "user_properties": {
                    "Residence": "Shibuya",
                    "city": "Tokyo",
                    "country": "JP",
                    "email": "gabi29@gmail.com",
                    "gender": "M",
                    "name": "User2 Gabi2",
                    "organization": "Company",
                    "region": "ABC",
                    "title": "Owner",
                    "zip": "100-0001"
                  }
                }
              ],
              "options": {
                "min_id_length": 1
              }
            },
            "JSON_ARRAY": {},
            "XML": {}
          },
          "files": {}
        }
      }
    },
    "expectedOutput": {
      "output": {
        "status": 400,
        "message": "[Generic Response Handler] Request failed for destination any with status: 400",
        "destinationResponse": {
          "response": "",
          "status": 400
        },
        "statTags": {
          "destType": "ANY",
          "errorCategory": "network",
          "errorType": "aborted",
          "feature": "dataDelivery",
          "implementation": "native",
          "module": "destination"
        }
      }
    },
    "expectedProxyMethodParams": {
      "endpoint": "https://api.amplitude.com/2/httpapi/test4",
      "data": {
        "api_key": "c9d8a13b8bcab46a547f7be5200c483d",
        "events": [
          {
            "app_name": "Rudder-CleverTap_Example",
            "app_version": "1.0",
            "time": 1619006730330,
            "user_id": "gabi_userId_45",
            "user_properties": {
              "Residence": "Shibuya",
              "city": "Tokyo",
              "country": "JP",
              "email": "gabi29@gmail.com",
              "gender": "M",
              "name": "User2 Gabi2",
              "organization": "Company",
              "region": "ABC",
              "title": "Owner",
              "zip": "100-0001"
            }
          }
        ],
        "options": {
          "min_id_length": 1
        }
      },
      "params": {},
      "headers": {
        "Content-Type": "application/json",
        "User-Agent": "RudderLabs"
      },
      "method": "POST"
    },
    "mockResult": {
      "response": {
        "status": 400,
        "statusText": "Bad Request"
      }
    }
  },
  {
    "input": {
      "request": {
        "body": {
          "type": "REST",
          "endpoint": "https://api.amplitude.com/2/httpapi/test5",
          "method": "POST",
          "userId": "gabi_anonId_45",
          "headers": {
            "Content-Type": "application/json",
            "User-Agent": "RudderLabs"
          },
          "params": {},
          "body": {
            "FORM": {},
            "JSON": {
              "api_key": "c9d8a13b8bcab46a547f7be5200c483d",
              "events": [
                {
                  "app_name": "Rudder-CleverTap_Example",
                  "app_version": "1.0",
                  "time": 1619006730330,
                  "user_id": "gabi_userId_45",
                  "user_properties": {
                    "Residence": "Shibuya",
                    "city": "Tokyo",
                    "country": "JP",
                    "email": "gabi29@gmail.com",
                    "gender": "M",
                    "name": "User2 Gabi2",
                    "organization": "Company",
                    "region": "ABC",
                    "title": "Owner",
                    "zip": "100-0001"
                  }
                }
              ],
              "options": {
                "min_id_length": 1
              }
            },
            "JSON_ARRAY": {},
            "XML": {}
          },
          "files": {}
        }
      }
    },
    "expectedOutput": {
      "output": {
        "status": 500,
        "message": "[Generic Response Handler] Request failed for destination any with status: 500",
        "destinationResponse": {
          "response": "",
          "status": 500
        },
        "statTags": {
          "destType": "ANY",
          "errorCategory": "network",
          "errorType": "retryable",
          "feature": "dataDelivery",
          "implementation": "native",
          "module": "destination"
        }
      }
    },
    "expectedProxyMethodParams": {
      "endpoint": "https://api.amplitude.com/2/httpapi/test5",
      "data": {
        "api_key": "c9d8a13b8bcab46a547f7be5200c483d",
        "events": [
          {
            "app_name": "Rudder-CleverTap_Example",
            "app_version": "1.0",
            "time": 1619006730330,
            "user_id": "gabi_userId_45",
            "user_properties": {
              "Residence": "Shibuya",
              "city": "Tokyo",
              "country": "JP",
              "email": "gabi29@gmail.com",
              "gender": "M",
              "name": "User2 Gabi2",
              "organization": "Company",
              "region": "ABC",
              "title": "Owner",
              "zip": "100-0001"
            }
          }
        ],
        "options": {
          "min_id_length": 1
        }
      },
      "params": {},
      "headers": {
        "Content-Type": "application/json",
        "User-Agent": "RudderLabs"
      },
      "method": "POST"
    },
    "mockResult": {
      "response": {}
    }
  },
  {
    "input": {
      "request": {
        "body": {
          "type": "REST",
          "endpoint": "https://api.amplitude.com/2/httpapi/test6",
          "method": "POST",
          "userId": "gabi_anonId_45",
          "headers": {
            "Content-Type": "application/json",
            "User-Agent": "RudderLabs"
          },
          "params": {},
          "body": {
            "FORM": {},
            "JSON": {
              "api_key": "c9d8a13b8bcab46a547f7be5200c483d",
              "events": [
                {
                  "app_name": "Rudder-CleverTap_Example",
                  "app_version": "1.0",
                  "time": 1619006730330,
                  "user_id": "gabi_userId_45",
                  "user_properties": {
                    "Residence": "Shibuya",
                    "city": "Tokyo",
                    "country": "JP",
                    "email": "gabi29@gmail.com",
                    "gender": "M",
                    "name": "User2 Gabi2",
                    "organization": "Company",
                    "region": "ABC",
                    "title": "Owner",
                    "zip": "100-0001"
                  }
                }
              ],
              "options": {
                "min_id_length": 1
              }
            },
            "JSON_ARRAY": {},
            "XML": {}
          },
          "files": {}
        }
      }
    },
    "expectedOutput": {
      "output": {
        "status": 500,
        "message": "[Generic Response Handler] Request failed for destination any with status: 500",
        "destinationResponse": {
          "response": "",
          "status": 500
        },
        "statTags": {
          "destType": "ANY",
          "errorCategory": "network",
          "errorType": "retryable",
          "feature": "dataDelivery",
          "implementation": "native",
          "module": "destination"
        }
      }
    },
    "expectedProxyMethodParams": {
      "endpoint": "https://api.amplitude.com/2/httpapi/test6",
      "data": {
        "api_key": "c9d8a13b8bcab46a547f7be5200c483d",
        "events": [
          {
            "app_name": "Rudder-CleverTap_Example",
            "app_version": "1.0",
            "time": 1619006730330,
            "user_id": "gabi_userId_45",
            "user_properties": {
              "Residence": "Shibuya",
              "city": "Tokyo",
              "country": "JP",
              "email": "gabi29@gmail.com",
              "gender": "M",
              "name": "User2 Gabi2",
              "organization": "Company",
              "region": "ABC",
              "title": "Owner",
              "zip": "100-0001"
            }
          }
        ],
        "options": {
          "min_id_length": 1
        }
      },
      "params": {},
      "headers": {
        "Content-Type": "application/json",
        "User-Agent": "RudderLabs"
      },
      "method": "POST"
    },
    "mockResult": {}
  }
]